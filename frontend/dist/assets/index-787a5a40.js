var ht=Object.defineProperty;var bt=(r,o,l)=>o in r?ht(r,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[o]=l;var D=(r,o,l)=>(bt(r,typeof o!="symbol"?o+"":o,l),l);import{r as n,a as pt,u as F,b as Pe,B as ft,R as gt,c as z,d as wt}from"./vendor-6514915f.js";import{l as vt}from"./socket-d9998155.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))m(c);new MutationObserver(c=>{for(const x of c)if(x.type==="childList")for(const h of x.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&m(h)}).observe(document,{childList:!0,subtree:!0});function l(c){const x={};return c.integrity&&(x.integrity=c.integrity),c.referrerPolicy&&(x.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?x.credentials="include":c.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function m(c){if(c.ep)return;c.ep=!0;const x=l(c);fetch(c.href,x)}})();var Te={exports:{}},V={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jt=n,yt=Symbol.for("react.element"),Nt=Symbol.for("react.fragment"),Ct=Object.prototype.hasOwnProperty,St=jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kt={key:!0,ref:!0,__self:!0,__source:!0};function $e(r,o,l){var m,c={},x=null,h=null;l!==void 0&&(x=""+l),o.key!==void 0&&(x=""+o.key),o.ref!==void 0&&(h=o.ref);for(m in o)Ct.call(o,m)&&!kt.hasOwnProperty(m)&&(c[m]=o[m]);if(r&&r.defaultProps)for(m in o=r.defaultProps,o)c[m]===void 0&&(c[m]=o[m]);return{$$typeof:yt,type:r,key:x,ref:h,props:c,_owner:St.current}}V.Fragment=Nt;V.jsx=$e;V.jsxs=$e;Te.exports=V;var e=Te.exports,ae={},Le=pt;ae.createRoot=Le.createRoot,ae.hydrateRoot=Le.hydrateRoot;const re=()=>{n.useEffect(()=>{const r=document.querySelector('meta[name="viewport"]'),o=(r==null?void 0:r.getAttribute("content"))||"width=device-width, initial-scale=1.0";if(r)r.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover");else{const l=document.createElement("meta");l.name="viewport",l.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover",document.getElementsByTagName("head")[0].appendChild(l)}return()=>{r&&r.setAttribute("content",o)}},[])};function Rt(){const r=F(),[o,l]=n.useState(!1),[m,c]=n.useState(null),[x,h]=n.useState(window.innerHeight>window.innerWidth?"portrait":"landscape");re(),n.useEffect(()=>{const g=N=>{N.preventDefault(),c(N),l(!0)};return window.addEventListener("beforeinstallprompt",g),window.matchMedia("(display-mode: standalone)").matches&&l(!1),()=>{window.removeEventListener("beforeinstallprompt",g)}},[]),n.useEffect(()=>{const g=()=>{h(window.innerHeight>window.innerWidth?"portrait":"landscape")};return window.addEventListener("resize",g),window.addEventListener("orientationchange",g),()=>{window.removeEventListener("resize",g),window.removeEventListener("orientationchange",g)}},[]);const v=async()=>{if(m){m.prompt();const{outcome:g}=await m.userChoice;g==="accepted"&&l(!1),c(null)}};return e.jsxs("div",{className:"min-h-screen-safe flex flex-col items-center justify-center bg-gradient-to-br from-blue-900 via-blue-700 to-blue-400 text-white mobile:p-2 sm:p-4 touch-manipulation no-scroll-bounce",children:[o&&e.jsxs("div",{className:"mobile-fixed-top bg-black/80 backdrop-blur-sm text-white p-3 text-center z-mobile-modal animate-slide-down",children:[e.jsx("p",{className:"text-sm mb-2",children:"📱 Instalar ArteRápida como app?"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("button",{onClick:v,className:"bg-blue-500 text-white px-4 py-1 rounded-lg text-sm hover:bg-blue-600 transition touch-optimized tap-feedback",children:"Instalar"}),e.jsx("button",{onClick:()=>l(!1),className:"bg-gray-500 text-white px-4 py-1 rounded-lg text-sm hover:bg-gray-600 transition touch-optimized tap-feedback",children:"Agora não"})]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 px-4 w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8 animate-bounce-gentle",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🎨"}),e.jsx("h1",{className:"text-2xl xs:text-3xl sm:text-4xl md:text-5xl font-bold mb-2 bg-gradient-to-r from-yellow-300 via-yellow-200 to-yellow-300 bg-clip-text text-transparent",children:"ArteRápida"}),e.jsx("p",{className:"mobile:text-sm-mobile sm:text-base md:text-lg text-blue-100 font-medium",children:"Desenhe, adivinhe e divirta-se!"})]}),e.jsxs("div",{className:"flex flex-col mobile:gap-3 sm:gap-4 w-full",children:[e.jsxs("button",{className:"ios-button mobile:min-h-touch bg-gradient-to-r from-yellow-400 to-yellow-300 text-blue-900 mobile:px-6 mobile:py-4 sm:px-8 sm:py-4 rounded-2xl font-bold shadow-xl hover:shadow-2xl transition-all duration-300 mobile:text-base-mobile sm:text-lg flex items-center justify-center gap-3 tap-feedback transform hover:scale-105",onClick:()=>r("/criar-sala"),children:[e.jsx("span",{className:"text-2xl",children:"🎮"}),"Criar Sala"]}),e.jsxs("button",{className:"ios-button mobile:min-h-touch bg-white/20 backdrop-blur-sm text-white mobile:px-6 mobile:py-4 sm:px-8 sm:py-4 rounded-2xl font-bold shadow-xl hover:shadow-2xl transition-all duration-300 mobile:text-base-mobile sm:text-lg flex items-center justify-center gap-3 tap-feedback border border-white/30 hover:bg-white/30",onClick:()=>r("/entrar-sala"),children:[e.jsx("span",{className:"text-2xl",children:"🚪"}),"Entrar em Sala"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-8 w-full",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-3 text-center border border-white/20",children:[e.jsx("div",{className:"text-2xl mb-1",children:"👥"}),e.jsx("div",{className:"mobile:text-xs-mobile sm:text-sm font-medium",children:"Até 8 jogadores"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-3 text-center border border-white/20",children:[e.jsx("div",{className:"text-2xl mb-1",children:"📱"}),e.jsx("div",{className:"mobile:text-xs-mobile sm:text-sm font-medium",children:"Mobile-friendly"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-3 text-center border border-white/20",children:[e.jsx("div",{className:"text-2xl mb-1",children:"🎯"}),e.jsx("div",{className:"mobile:text-xs-mobile sm:text-sm font-medium",children:"3 dificuldades"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-3 text-center border border-white/20",children:[e.jsx("div",{className:"text-2xl mb-1",children:"💬"}),e.jsx("div",{className:"mobile:text-xs-mobile sm:text-sm font-medium",children:"Chat em tempo real"})]})]})]}),e.jsx("div",{className:"mt-auto pb-safe-bottom pt-8 text-center",children:e.jsxs("div",{className:"mobile:text-xs sm:text-sm text-blue-100/80 space-y-1",children:[e.jsx("p",{children:"Versão 2.0 - Otimizada para mobile 📱"}),e.jsx("p",{children:"© 2025 ArteRápida - Dev Rui Valentim"}),x==="landscape"&&window.innerHeight<500&&e.jsx("p",{className:"text-yellow-300 animate-pulse-fast",children:"💡 Rotacione para melhor experiência"})]})}),!1]})}const Et="https://jogo-0vuq.onrender.com",At=Et;class It{constructor(){D(this,"socket",null);D(this,"user",null);D(this,"reconnectAttempts",0);D(this,"maxReconnectAttempts",5);D(this,"reconnectInterval",null);D(this,"isConnected",!1);D(this,"reconnectData",{roomCode:"",userName:""})}connect(){return this.socket||(this.socket=vt(At,{autoConnect:!0,reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:this.maxReconnectAttempts,timeout:2e4,transports:["websocket","polling"],forceNew:!1,upgrade:!0}),this.socket.on("connect",()=>{this.isConnected=!0,this.reconnectAttempts=0,this.user&&this.shouldAttemptReconnect()&&this.attemptRoomReconnection()}),this.socket.on("disconnect",o=>{this.isConnected=!1,!(o==="io server disconnect"||o==="io client disconnect")&&this.handleReconnection()}),this.socket.on("connect_error",o=>{this.showConnectionError()}),this.socket.on("reconnect",o=>{this.isConnected=!0,this.reconnectAttempts=0}),this.socket.on("reconnect_error",o=>{this.reconnectAttempts++}),this.socket.on("reconnect_failed",()=>{this.showConnectionError()})),this.socket}shouldAttemptReconnect(){const o=localStorage.getItem("currentRoomCode"),l=localStorage.getItem("currentUserName");return!!(o&&l&&this.user)}async attemptRoomReconnection(){const{roomCode:o,userName:l}=this.reconnectData;if(!o||!l)return;const m=await this.reconnectToRoom(l,o);m.success?window.dispatchEvent(new CustomEvent("roomReconnected",{detail:m.gameState})):this.clearReconnectData()}handleReconnection(){this.reconnectAttempts<this.maxReconnectAttempts&&!this.reconnectInterval&&(this.reconnectInterval=setInterval(()=>{var o;if((o=this.socket)!=null&&o.connected){this.reconnectInterval&&(clearInterval(this.reconnectInterval),this.reconnectInterval=null);return}console.log(`Tentativa de reconexão ${this.reconnectAttempts+1}/${this.maxReconnectAttempts}`),this.reconnectAttempts++,this.reconnectAttempts>=this.maxReconnectAttempts&&(this.reconnectInterval&&(clearInterval(this.reconnectInterval),this.reconnectInterval=null),this.showConnectionError())},2e3))}showConnectionError(){window.dispatchEvent(new CustomEvent("connectionError"))}clearRoomData(){localStorage.removeItem("currentRoomCode"),localStorage.removeItem("currentUserName")}disconnect(){this.socket&&(this.clearRoomData(),this.socket.disconnect(),this.socket=null),this.reconnectInterval&&(clearInterval(this.reconnectInterval),this.reconnectInterval=null)}getSocket(){return this.socket?this.socket:this.connect()}setUser(o){this.user=o,localStorage.setItem("currentUserName",o.name)}getUser(){return this.user}createRoom(o,l=3,m="facil"){const c=this.getSocket();return new Promise((x,h)=>{c.emit("create-room",{userName:o,rounds:l,difficulty:m},v=>{v.success&&v.roomCode?(this.setUser({id:c.id??"",name:o}),localStorage.setItem("currentRoomCode",v.roomCode),x(v.roomCode)):h(v.error||"Erro ao criar sala")})})}joinRoom(o,l){const m=this.getSocket();return new Promise((c,x)=>{m.emit("join-room",{userName:o,roomCode:l},h=>{h.success?(this.setUser({id:m.id??"",name:o}),localStorage.setItem("currentRoomCode",l),c()):x(h.error||"Erro ao entrar na sala")})})}leaveRoom(){this.clearRoomData(),this.user=null}async reconnectToRoom(o,l){return{success:!0,gameState:{status:"connected",round:1,maxRounds:3,currentDrawer:"John",isDrawer:!0,timeLeft:120}}}clearReconnectData(){this.reconnectData={roomCode:"",userName:""}}}const f=new It;function Dt(){const[r,o]=n.useState(""),[l,m]=n.useState(!1),[c,x]=n.useState(""),[h,v]=n.useState(3),[g,N]=n.useState("facil"),y=F();re(),n.useEffect(()=>(f.connect(),()=>{f.getUser()||f.disconnect()}),[]);const P=async d=>{d.preventDefault(),m(!0),x("");try{const C=await f.createRoom(r,h,g);y(`/sala/${C}`)}catch(C){x(C instanceof Error?C.message:"Erro ao criar sala"),console.error("Erro ao criar sala:",C)}finally{m(!1)}},L=d=>{switch(d){case"facil":return{emoji:"🟢",name:"Fácil",desc:"Palavras simples"};case"medio":return{emoji:"🟡",name:"Médio",desc:"Palavras moderadas"};case"dificil":return{emoji:"🔴",name:"Difícil",desc:"Palavras complexas"};default:return{emoji:"🟢",name:"Fácil",desc:"Palavras simples"}}},j=L(g);return e.jsxs("div",{className:"min-h-screen-safe flex flex-col items-center justify-center bg-gradient-to-br from-blue-900 via-blue-700 to-blue-400 text-white mobile:p-3 sm:p-4 touch-manipulation no-scroll-bounce",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-4xl mb-2",children:"🎮"}),e.jsx("h2",{className:"mobile:text-xl sm:text-2xl md:text-3xl font-bold mb-2",children:"Criar Nova Sala"}),e.jsx("p",{className:"mobile:text-sm-mobile sm:text-base text-blue-100",children:"Configure sua partida personalizada"})]}),c&&e.jsxs("div",{className:"bg-red-500/90 backdrop-blur-sm text-white p-3 rounded-xl mb-4 w-full max-w-sm text-center mobile:text-sm-mobile sm:text-sm animate-slide-down border border-red-400",children:["❌ ",c]}),e.jsx("div",{className:"w-full max-w-sm bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 shadow-2xl p-6",children:e.jsxs("form",{onSubmit:P,className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-white mobile:text-sm-mobile sm:text-sm font-medium",children:"👤 Seu nome"}),e.jsx("input",{className:"w-full ios-button mobile:min-h-touch p-3 rounded-xl text-blue-900 mobile:text-base-mobile sm:text-base placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-yellow-300 transition",type:"text",placeholder:"Digite seu nome...",value:r,onChange:d=>o(d.target.value),required:!0,disabled:l,maxLength:20})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-white mobile:text-sm-mobile sm:text-sm font-medium",children:"🎯 Número de rondas"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[1,2,3,4,5].map(d=>e.jsx("button",{type:"button",className:`ios-button mobile:min-h-touch p-2 rounded-xl mobile:text-sm-mobile sm:text-base font-bold transition-all transform ${h===d?"bg-yellow-300 text-blue-900 scale-105 shadow-lg border-2 border-yellow-500":"bg-white/20 text-white border border-white/30 hover:bg-white/30 tap-feedback"}`,onClick:()=>v(d),disabled:l,children:d},d))}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[6,7,8,9,10].map(d=>e.jsx("button",{type:"button",className:`ios-button mobile:min-h-touch p-2 rounded-xl mobile:text-sm-mobile sm:text-base font-bold transition-all transform ${h===d?"bg-yellow-300 text-blue-900 scale-105 shadow-lg border-2 border-yellow-500":"bg-white/20 text-white border border-white/30 hover:bg-white/30 tap-feedback"}`,onClick:()=>v(d),disabled:l,children:d},d))}),e.jsx("div",{className:"text-center p-2 bg-blue-800/50 rounded-lg border border-blue-600/50",children:e.jsxs("div",{className:"mobile:text-xs-mobile sm:text-sm text-yellow-200 font-medium",children:[h<=3&&"⚡ Partida rápida (~3-5 min)",h>=4&&h<=6&&"⏱️ Partida média (~6-10 min)",h>=7&&h<=10&&"🕐 Partida longa (~12-15 min)"]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-white mobile:text-sm-mobile sm:text-sm font-medium",children:"🎲 Dificuldade"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["facil","medio","dificil"].map(d=>{const C=L(d);return e.jsxs("button",{type:"button",className:`ios-button mobile:min-h-touch p-3 rounded-xl transition-all transform ${g===d?"bg-yellow-300 text-blue-900 scale-105 shadow-lg border-2 border-yellow-500":"bg-white/20 text-white border border-white/30 hover:bg-white/30 tap-feedback"}`,onClick:()=>N(d),disabled:l,children:[e.jsx("div",{className:"text-lg mb-1",children:C.emoji}),e.jsx("div",{className:"mobile:text-xs-mobile sm:text-sm font-bold",children:C.name})]},d)})}),e.jsx("div",{className:"text-center p-2 bg-purple-800/50 rounded-lg border border-purple-600/50",children:e.jsxs("div",{className:"mobile:text-xs-mobile sm:text-sm text-purple-200",children:[j.emoji," ",j.desc]})})]}),e.jsx("button",{className:`ios-button mobile:min-h-touch w-full ${l?"bg-gray-400/50 cursor-not-allowed":"bg-gradient-to-r from-yellow-400 to-yellow-300 hover:from-yellow-300 hover:to-yellow-200 transform hover:scale-105"} text-blue-900 mobile:py-4 sm:py-4 px-6 rounded-2xl font-bold shadow-xl transition-all duration-300 mobile:text-base-mobile sm:text-lg flex items-center justify-center gap-3 tap-feedback`,type:"submit",disabled:l||!r.trim(),children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-900"}),"Criando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xl",children:"🚀"}),"Criar Sala"]})})]})}),e.jsxs("button",{onClick:()=>y("/"),className:"mt-6 ios-button text-white hover:text-yellow-300 mobile:text-sm-mobile sm:text-base font-medium flex items-center gap-2 px-4 py-2 rounded-xl transition tap-feedback",children:[e.jsx("span",{children:"⬅️"}),"Voltar ao início"]}),e.jsx("div",{className:"mt-6 w-full max-w-sm",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl p-4 border border-white/10",children:[e.jsx("h3",{className:"mobile:text-sm-mobile sm:text-base font-semibold mb-2 text-yellow-300",children:"💡 Dicas:"}),e.jsxs("ul",{className:"mobile:text-xs-mobile sm:text-sm text-blue-100 space-y-1",children:[e.jsx("li",{children:"• Escolha um nome fácil de ler"}),e.jsx("li",{children:"• 3-5 rondas é ideal para jogos rápidos"}),e.jsx("li",{children:"• Dificuldade média é perfeita para iniciantes"}),e.jsx("li",{children:"• Partilhe o código com os seus amigos!"})]})]})})]})}function Me(){const[r,o]=n.useState(""),[l,m]=n.useState(""),[c,x]=n.useState(!1),[h,v]=n.useState(""),g=F(),{code:N}=Pe();re(),n.useEffect(()=>(N&&m(N.toUpperCase()),f.connect(),()=>{f.getUser()||f.disconnect()}),[N]);const y=async j=>{j.preventDefault(),x(!0),v("");try{if(l.length!==6)throw new Error("O código da sala deve ter 6 caracteres");await f.joinRoom(r,l.toUpperCase()),g(`/sala/${l.toUpperCase()}`)}catch(d){v(d instanceof Error?d.message:"Erro ao entrar na sala")}finally{x(!1)}},P=j=>{const d=j.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,6);m(d)},L=async()=>{try{const j=await navigator.clipboard.readText(),d=j.match(/[A-Z0-9]{6}/);m(d?d[0]:j.slice(0,6).toUpperCase())}catch{}};return e.jsxs("div",{className:"min-h-screen-safe flex flex-col items-center justify-center bg-gradient-to-br from-blue-900 via-blue-700 to-blue-400 text-white mobile:p-3 sm:p-4 touch-manipulation no-scroll-bounce",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-4xl mb-2",children:"🚪"}),e.jsx("h2",{className:"mobile:text-xl sm:text-2xl md:text-3xl font-bold mb-2",children:"Entrar em Sala"}),e.jsx("p",{className:"mobile:text-sm-mobile sm:text-base text-blue-100",children:"Digite o código da sala para participar"})]}),h&&e.jsxs("div",{className:"bg-red-500/90 backdrop-blur-sm text-white p-3 rounded-xl mb-4 w-full max-w-sm text-center mobile:text-sm-mobile sm:text-sm animate-slide-down border border-red-400",children:["❌ ",h]}),e.jsx("div",{className:"w-full max-w-sm bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 shadow-2xl p-6",children:e.jsxs("form",{onSubmit:y,className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-white mobile:text-sm-mobile sm:text-sm font-medium",children:"👤 Seu nome"}),e.jsx("input",{className:"w-full ios-button mobile:min-h-touch p-3 rounded-xl text-blue-900 mobile:text-base-mobile sm:text-base placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-yellow-300 transition",type:"text",placeholder:"Digite seu nome...",value:r,onChange:j=>o(j.target.value),required:!0,disabled:c,maxLength:20})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-white mobile:text-sm-mobile sm:text-sm font-medium",children:"🔑 Código da sala"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"w-full ios-button mobile:min-h-touch p-3 pr-16 rounded-xl text-blue-900 mobile:text-base-mobile sm:text-base placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-yellow-300 transition font-mono tracking-wider text-center uppercase",type:"text",placeholder:"ABC123",value:l,onChange:j=>P(j.target.value),required:!0,disabled:c,maxLength:6,style:{letterSpacing:"0.2em"}}),e.jsx("button",{type:"button",onClick:L,className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-blue-500/70 hover:bg-blue-500 text-white p-2 rounded-lg transition tap-feedback",disabled:c,title:"Colar código",children:"📋"})]}),e.jsx("div",{className:"flex justify-center space-x-1",children:[...Array(6)].map((j,d)=>e.jsx("div",{className:`w-3 h-3 rounded-full transition-all ${d<l.length?"bg-yellow-300 scale-110":"bg-white/30"}`},d))}),l.length>0&&l.length<6&&e.jsxs("p",{className:"text-center mobile:text-xs-mobile sm:text-sm text-yellow-200",children:[6-l.length," caracteres restantes"]})]}),e.jsx("button",{className:`ios-button mobile:min-h-touch w-full ${c?"bg-gray-400/50 cursor-not-allowed":"bg-gradient-to-r from-green-400 to-green-300 hover:from-green-300 hover:to-green-200 transform hover:scale-105"} text-blue-900 mobile:py-4 sm:py-4 px-6 rounded-2xl font-bold shadow-xl transition-all duration-300 mobile:text-base-mobile sm:text-lg flex items-center justify-center gap-3 tap-feedback`,type:"submit",disabled:c||!r.trim()||l.length!==6,children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-900"}),"Entrando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xl",children:"🎯"}),"Entrar na Sala"]})})]})}),e.jsxs("div",{className:"mt-6 w-full max-w-sm space-y-3",children:["BarcodeDetector"in window&&e.jsxs("button",{onClick:()=>{alert("Scanner QR será implementado em breve!")},className:"w-full ios-button bg-purple-500/20 text-white mobile:py-3 sm:py-3 px-4 rounded-xl font-medium mobile:text-sm-mobile sm:text-base flex items-center justify-center gap-3 tap-feedback border border-purple-400/30",children:[e.jsx("span",{className:"text-lg",children:"📱"}),"Ler código QR"]}),e.jsxs("button",{onClick:()=>g("/"),className:"w-full ios-button text-white hover:text-yellow-300 mobile:py-3 sm:py-3 px-4 rounded-xl font-medium mobile:text-sm-mobile sm:text-base flex items-center justify-center gap-3 tap-feedback",children:[e.jsx("span",{children:"⬅️"}),"Voltar ao início"]})]}),e.jsx("div",{className:"mt-6 w-full max-w-sm",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl p-4 border border-white/10",children:[e.jsx("h3",{className:"mobile:text-sm-mobile sm:text-base font-semibold mb-2 text-yellow-300",children:"❓ Como funciona:"}),e.jsxs("ul",{className:"mobile:text-xs-mobile sm:text-sm text-blue-100 space-y-1",children:[e.jsx("li",{children:"• Peça o código de 6 caracteres ao host"}),e.jsx("li",{children:"• O código aparece no topo da tela do host"}),e.jsx("li",{children:"• Pode colar o código diretamente"}),e.jsx("li",{children:"• Códigos expiram quando a sala é fechada"})]})]})}),N&&e.jsx("div",{className:"mt-4 w-full max-w-sm",children:e.jsx("div",{className:"bg-green-800/30 backdrop-blur-sm rounded-xl p-3 border border-green-600/50",children:e.jsxs("p",{className:"text-center mobile:text-xs-mobile sm:text-sm text-green-200",children:["✅ Código detectado: ",e.jsx("span",{className:"font-mono font-bold",children:N})]})})})]})}function Lt(){var Ie,De;const{roomCode:r}=Pe(),o=F(),[l,m]=n.useState([]),[c,x]=n.useState(!0),[h,v]=n.useState(""),[g,N]=n.useState(!1),[y,P]=n.useState(!1),[L,j]=n.useState(null),d=n.useRef(null),C=n.useRef(null),[A,ze]=n.useState({width:500,height:350}),[T,M]=n.useState([]),[le,U]=n.useState(!1),[q,ie]=n.useState(""),[Ue,G]=n.useState([]),[_,ce]=n.useState(!1),[de,Q]=n.useState(null),[me,xe]=n.useState(null),[Y,ue]=n.useState(1),[_e,J]=n.useState(0),[Oe,X]=n.useState(!1),[he,be]=n.useState(null),[pe,Z]=n.useState(null),[R,fe]=n.useState(3),[K,ge]=n.useState(1),ee=f.getUser(),te=(Ie=l.find(t=>t.id===(ee==null?void 0:ee.id)))==null?void 0:Ie.isHost,[He,We]=n.useState(!1),[Be,w]=n.useState(!1),[Fe,E]=n.useState(""),[Ve,we]=n.useState(!1),[ve,qe]=n.useState([]),[Pt,je]=n.useState(null),[O,Ge]=n.useState([]),[se,ye]=n.useState(""),[Qe,Ne]=n.useState(!1),[Ce,Ye]=n.useState([]),[Je,Se]=n.useState(!1),[Tt,oe]=n.useState(!1),[H,ne]=n.useState("connected"),[I,Xe]=n.useState(!1),$=n.useRef([]),k=(t,s)=>{const u=window.setTimeout(()=>{t(),$.current=$.current.filter(b=>b!==u)},s);return $.current.push(u),u},Ze=()=>{$.current.forEach(t=>window.clearTimeout(t)),$.current=[]};n.useEffect(()=>{const t=document.querySelector('meta[name="viewport"]');if(t)t.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no");else{const s=document.createElement("meta");s.name="viewport",s.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no",document.getElementsByTagName("head")[0].appendChild(s)}return()=>{t&&t.setAttribute("content","width=device-width, initial-scale=1.0")}},[]);const W=()=>{if(C.current){const t=C.current.clientWidth,s=window.innerWidth,u=window.innerHeight;let b,a;I?(b=Math.min(t-10,s-20),a=Math.floor(Math.min(b*.6,u*.4))):(s<480?b=Math.min(300,t-10):s<768?b=Math.min(400,t-15):b=Math.min(500,t-20),a=Math.floor(b*.7)),ze({width:b,height:a})}};n.useEffect(()=>(W(),window.addEventListener("resize",W),()=>window.removeEventListener("resize",W)),[]),n.useEffect(()=>{W()},[I]),n.useEffect(()=>{const t=f.getSocket(),s=f.getUser();if(!s||!r){o("/");return}t.on("player-joined",({players:a})=>{m(a)}),t.on("player-left",({players:a})=>{m(a),a.length===0&&o("/")}),t.on("players-update",({players:a,drawerId:i,round:p,maxRounds:S})=>{m(a),xe(i),ue(p),S&&ge(S)}),t.on("game-started",()=>{N(!0)}),t.on("round-start",({isDrawer:a,word:i})=>{P(a),j(a?i:null),G([]),ce(!1),Q(null)}),t.on("draw-line",a=>{M(i=>[...i,a])}),t.on("guess",({name:a,text:i,correct:p})=>{var S;G(ut=>[...ut,{name:a,text:i,correct:p}]),p&&Q(a),p&&a===((S=f.getUser())==null?void 0:S.name)&&ce(!0)}),t.on("clear-canvas",()=>{M([])}),t.on("timer-update",({timeLeft:a})=>{J(a)}),t.on("round-ended",({reason:a,message:i})=>{a==="timeout"?(X(!0),k(()=>X(!1),4e3)):a==="drawer-left"&&(E(i||"O desenhista saiu da sala. Avançando para próxima ronda..."),w(!0),k(()=>w(!1),4e3))}),t.on("countdown",({value:a,round:i,maxRounds:p})=>{be(a>0?a:null),We(i===p&&a>0&&a<=3)}),t.on("game-ended",({players:a})=>{const i=[...a].sort((p,S)=>S.score-p.score);Z(i)}),t.on("game-restarted",()=>{Z(null),X(!1),be(null),J(0),Q(null),G([]),N(!1)}),t.on("room-deleted",()=>{o("/")}),t.on("room-not-found",()=>{v("Sala não encontrada ou foi excluída"),setTimeout(()=>{o("/")},3e3)}),t.on("hint",({hint:a,type:i})=>{qe(p=>[...p,{hint:a,type:i}]),E(a),w(!0),k(()=>w(!1),4e3)}),t.on("word-reveal",({word:a})=>{je(a),E(`A palavra era: ${a}`),w(!0),k(()=>{w(!1),je(null)},5e3)}),t.on("chat-message",({name:a,message:i,timestamp:p})=>{Ge(S=>[...S,{name:a,message:i,timestamp:p}])}),t.on("connect",()=>{ne("connected"),oe(!1),r&&s&&t.emit("join-room",{userName:s.name,roomCode:r},a=>{a.success||v("Erro ao reconectar à sala")})}),t.on("disconnect",()=>{ne("disconnected"),oe(!0)}),t.on("reconnect",()=>{ne("connected"),oe(!1)}),t.on("player-temporarily-disconnected",({playerId:a,playerName:i})=>{E(`${i} foi temporariamente desconectado`),w(!0),k(()=>w(!1),3e3)}),t.on("player-reconnected",({playerId:a,playerName:i,players:p})=>{m(p),E(`${i} reconectou!`),w(!0),k(()=>w(!1),3e3)});const u=a=>{const{gameState:i}=a.detail;i&&(ue(i.round),ge(i.maxRounds),xe(i.currentDrawer),P(i.isDrawer),J(i.timeLeft),E("Reconectado à sala com sucesso!"),w(!0),k(()=>w(!1),3e3))},b=()=>{v("Falha na conexão. Tentando reconectar..."),k(()=>{H==="disconnected"&&o("/")},1e4)};return window.addEventListener("roomReconnected",u),window.addEventListener("connectionError",b),x(!1),()=>{Ze(),t.off("player-joined"),t.off("player-left"),t.off("players-update"),t.off("draw-line"),t.off("guess"),t.off("clear-canvas"),t.off("timer-update"),t.off("round-ended"),t.off("countdown"),t.off("game-ended"),t.off("game-restarted"),t.off("room-deleted"),t.off("room-not-found"),t.off("hint"),t.off("word-reveal"),t.off("chat-message"),t.off("connect"),t.off("disconnect"),t.off("reconnect"),t.off("player-temporarily-disconnected"),t.off("player-reconnected"),window.removeEventListener("roomReconnected",u),window.removeEventListener("connectionError",b)}},[r,o,H]);const ke=()=>{f.leaveRoom(),f.disconnect(),o("/")},Ke=()=>{f.getSocket().emit("start-game",{roomCode:r})},et=(t,s=500,u=350)=>({x:t.x/s*A.width,y:t.y/u*A.height}),B=(t,s=500,u=350)=>({x:t.x*s/A.width,y:t.y*u/A.height}),tt=t=>{if(!y)return;U(!0);const s=d.current.getBoundingClientRect(),u=t.clientX-s.left,b=t.clientY-s.top,a=B({x:u,y:b});M(i=>[...i,{points:[a]}])},st=t=>{if(!y||!le)return;const s=d.current.getBoundingClientRect(),u=t.clientX-s.left,b=t.clientY-s.top,a=B({x:u,y:b});M(i=>{const p=[...i];return p[p.length-1].points.push(a),p})},ot=t=>{if(!y)return;t.preventDefault(),t.stopPropagation(),U(!0);const s=t.touches[0],u=d.current.getBoundingClientRect(),b=s.clientX-u.left,a=s.clientY-u.top,i=B({x:b,y:a});M(p=>[...p,{points:[i]}])},nt=t=>{if(!y||!le)return;t.preventDefault(),t.stopPropagation();const s=t.touches[0],u=d.current.getBoundingClientRect(),b=s.clientX-u.left,a=s.clientY-u.top,i=B({x:b,y:a});M(p=>{const S=[...p];return S[S.length-1].points.push(i),S})},at=t=>{if(!y)return;t.preventDefault(),t.stopPropagation(),U(!1);const s=f.getSocket(),u=T[T.length-1];u&&s.emit("draw-line",{roomCode:r,line:u})},Re=()=>{if(!y)return;U(!1);const t=f.getSocket(),s=T[T.length-1];s&&t.emit("draw-line",{roomCode:r,line:s})};n.useEffect(()=>{const t=d.current;if(!t)return;const s=t.getContext("2d");s&&(s.clearRect(0,0,t.width,t.height),s.strokeStyle="#222",s.lineWidth=3,s.lineCap="round",T.forEach(u=>{s.beginPath(),u.points.forEach((b,a)=>{const i=et(b);a===0?s.moveTo(i.x,i.y):s.lineTo(i.x,i.y)}),s.stroke()}))},[T,A]);const rt=t=>{t.preventDefault(),!(!q.trim()||_)&&(f.getSocket().emit("guess",{roomCode:r,text:q}),ie(""))},lt=()=>{M([]),f.getSocket().emit("clear-canvas",{roomCode:r})},it=async()=>{try{const u=`Venha jogar ArteRápida comigo! Basta entrar com seu nome:

${`${window.location.origin}/entrar-sala/${r}`}`,b=`whatsapp://send?text=${encodeURIComponent(u)}`,a=window.open(b,"_blank");E(a?"Link para WhatsApp aberto!":"Não foi possível abrir o WhatsApp. Verifique se pop-ups estão habilitados."),w(!0),k(()=>w(!1),3e3)}catch{Ae()}},Ee=()=>{we(!0)},ct=()=>{we(!1)},Ae=()=>{if(navigator.clipboard)navigator.clipboard.writeText(r||"");else{const t=document.createElement("textarea");t.value=r||"",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}E("Código da sala copiado!"),w(!0),k(()=>w(!1),3e3)},dt=t=>{t.preventDefault(),se.trim()&&(f.getSocket().emit("chat-message",{roomCode:r,message:se}),ye(""))},mt=()=>{f.getSocket().emit("get-word-history",{roomCode:r},t=>{t.success&&t.history&&(Ye(t.history),Se(!0))})},xt=t=>new Date(t).toLocaleTimeString("pt-PT",{hour:"2-digit",minute:"2-digit"});return c?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-900 to-blue-400",children:e.jsx("div",{className:"text-white text-xl",children:"Carregando sala..."})}):h?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-blue-900 to-blue-400",children:[e.jsx("div",{className:"bg-red-500 text-white p-4 rounded-lg mb-4",children:h}),e.jsx("button",{onClick:()=>o("/"),className:"bg-white text-blue-900 px-6 py-2 rounded-lg font-semibold shadow hover:bg-gray-200 transition",children:"Voltar para Home"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 to-blue-400 text-white p-1 sm:p-2 overflow-x-hidden",children:[H!=="connected"&&e.jsx("div",{className:"fixed top-0 left-0 right-0 bg-red-600 text-white text-center py-1 z-50 text-xs",children:H==="reconnecting"?"🔄 Reconectando...":"❌ Sem conexão"}),Be&&e.jsx("div",{className:"fixed top-2 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-3 py-1 rounded-lg shadow-lg z-50 text-xs animate-fade-in-out",children:Fe}),Qe&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-2",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-3 max-w-sm w-full max-h-80 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h3",{className:"text-blue-900 text-base font-bold",children:"💬 Chat"}),e.jsx("button",{onClick:()=>Ne(!1),className:"text-gray-500 hover:text-gray-700 text-lg",children:"✕"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-100 rounded p-2 mb-2 text-xs text-gray-800",children:O.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Sem mensagens ainda..."}):O.map((t,s)=>e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"font-semibold text-blue-900",children:t.name}),e.jsx("span",{className:"text-gray-500 text-[10px] ml-1",children:xt(t.timestamp)}),e.jsx("div",{className:"text-gray-800",children:t.message})]},s))}),e.jsxs("form",{onSubmit:dt,className:"flex gap-1",children:[e.jsx("input",{type:"text",value:se,onChange:t=>ye(t.target.value),placeholder:"Digite sua mensagem...",className:"flex-1 p-2 border rounded text-gray-800 text-xs",autoComplete:"off"}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700 text-xs",children:"➤"})]})]})}),Je&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-2",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-3 max-w-sm w-full max-h-80 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h3",{className:"text-blue-900 text-base font-bold",children:"📚 Histórico"}),e.jsx("button",{onClick:()=>Se(!1),className:"text-gray-500 hover:text-gray-700 text-lg",children:"✕"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto text-gray-800 text-xs",children:Ce.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Nenhuma palavra ainda..."}):Ce.map((t,s)=>e.jsxs("div",{className:"mb-2 p-2 bg-gray-100 rounded",children:[e.jsxs("div",{className:"font-semibold",children:["Ronda ",t.round]}),e.jsx("div",{className:"text-blue-900 font-bold",children:t.word}),e.jsxs("div",{className:"text-gray-600 text-[10px]",children:["Desenhista: ",t.drawer]}),t.guessedBy.length>0&&e.jsxs("div",{className:"text-green-600 text-[10px]",children:["Acertaram: ",t.guessedBy.join(", ")]})]},s))})]})}),Ve&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-2",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-3 max-w-sm w-full relative max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:ct,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-lg",children:"✕"}),e.jsx("h3",{className:"text-blue-900 text-base font-bold mb-2 text-center",children:"🔗 Compartilhar Sala"}),e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("p",{className:"text-gray-600 text-xs",children:"Código da sala:"}),e.jsxs("div",{className:"bg-blue-100 text-blue-900 font-mono text-lg font-bold p-2 rounded flex justify-center items-center gap-2 mb-2",children:[r,e.jsx("button",{onClick:Ae,className:"text-blue-600 hover:text-blue-800 text-sm",children:"📋"})]}),e.jsxs("div",{className:"flex flex-col space-y-2 mb-3",children:[e.jsx("p",{className:"text-gray-600 text-xs",children:"Link direto:"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",value:`${window.location.origin}/entrar-sala/${r}`,readOnly:!0,className:"bg-gray-100 text-gray-800 p-1 rounded text-xs flex-1"}),e.jsx("button",{onClick:()=>{const t=`${window.location.origin}/entrar-sala/${r}`;if(navigator.clipboard)navigator.clipboard.writeText(t);else{const s=document.createElement("textarea");s.value=t,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s)}E("Link copiado!"),w(!0),k(()=>w(!1),3e3)},className:"bg-blue-600 text-white px-2 py-1 rounded text-xs hover:bg-blue-700",children:"📋"})]})]}),e.jsxs("div",{className:"flex justify-center gap-2 mb-3",children:[e.jsx("button",{onClick:it,className:"bg-green-600 text-white px-3 py-2 rounded font-medium hover:bg-green-700 transition flex items-center justify-center gap-1 text-xs",children:"📱 WhatsApp"}),navigator.share&&e.jsx("button",{onClick:()=>{const t=`${window.location.origin}/entrar-sala/${r}`;navigator.share({title:"ArteRápida - Jogo de Desenho",text:"Venha jogar ArteRápida comigo! Basta entrar com seu nome.",url:t}).then(()=>{E("Compartilhado!"),w(!0),k(()=>w(!1),3e3)}).catch(s=>{})},className:"bg-blue-600 text-white px-3 py-2 rounded font-medium hover:bg-blue-700 transition flex items-center justify-center gap-1 text-xs",children:"📤 Mais"})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-gray-600 text-xs mb-1",children:"QR Code:"}),e.jsx("div",{className:"bg-white p-1 rounded-lg inline-block",children:e.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=${encodeURIComponent(`${window.location.origin}/entrar-sala/${r}`)}`,alt:"QR Code da sala",className:"w-24 h-24 mx-auto",onError:t=>{t.currentTarget.style.display="none";const s=t.currentTarget.parentElement;s&&(s.innerHTML='<p class="text-gray-500 text-xs p-2">QR indisponível</p>')}})})]})]})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col gap-1 mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-base sm:text-lg font-bold",children:["Sala: ",r]}),e.jsxs("span",{className:"bg-blue-800 text-white px-2 py-1 rounded text-xs font-semibold",children:[l.length," jogador",l.length!==1?"es":""]})]}),e.jsxs("div",{className:"flex gap-1 flex-wrap",children:[e.jsxs("button",{onClick:()=>Ne(!0),className:"bg-purple-600 text-white px-2 py-1 rounded text-xs hover:bg-purple-700 transition flex items-center gap-1",children:["💬",O.length>0&&e.jsx("span",{className:"bg-red-500 text-white text-[10px] rounded-full px-1",children:O.length})]}),e.jsx("button",{onClick:mt,className:"bg-orange-600 text-white px-2 py-1 rounded text-xs hover:bg-orange-700 transition",children:"📚"}),e.jsx("button",{onClick:Ee,className:"bg-blue-600 text-white px-2 py-1 rounded text-xs hover:bg-blue-700 transition",children:"🔗"}),te&&!g&&e.jsx("button",{onClick:Ke,className:"bg-green-500 text-white px-2 py-1 rounded text-xs hover:bg-green-600 transition",children:"▶️ Iniciar"}),e.jsx("button",{onClick:ke,className:"bg-red-500 text-white px-3 py-1 rounded text-xs hover:bg-red-600 transition flex items-center gap-1",title:"Sair da sala","aria-label":"Sair da sala",children:"🚪"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsxs("h2",{className:"font-semibold text-sm",children:["Jogadores (",l.length,")"]}),e.jsxs("div",{className:"text-xs text-yellow-200",children:["Ronda: ",Y||0,"/",K||1]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-1 text-xs",children:l.map(t=>e.jsxs("div",{className:`flex items-center justify-between p-1 bg-white/10 rounded ${me===t.id?"border border-yellow-300":""}`,children:[e.jsx("span",{className:"truncate flex-1 mr-1",children:t.name}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-yellow-300",children:t.score}),t.isHost&&e.jsx("span",{className:"text-yellow-300 text-[10px]",children:"👑"}),me===t.id&&e.jsx("span",{className:"text-green-300 text-[10px]",children:"✏️"})]})]},t.id))})]}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-2 text-center",children:g?y?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`flex ${I?"flex-col":"flex-col sm:flex-row"} justify-between items-center mb-2 gap-1`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-green-300 font-bold",children:"Você está desenhando!"}),e.jsx("button",{onClick:()=>Xe(!I),className:`px-2 py-1 rounded text-xs font-bold transition ${I?"bg-yellow-300 text-blue-900":"bg-white/20 text-white hover:bg-white/30"}`,title:I?"Modo Normal":"Modo Horizontal",children:I?"📱":"📺"})]}),e.jsxs("p",{className:"text-sm",children:["Palavra: ",e.jsx("span",{className:"font-mono bg-yellow-200 text-blue-900 px-1 py-0.5 rounded text-xs",children:L})]})]}),e.jsx("div",{ref:C,className:`w-full mb-2 ${I?"flex justify-center":""}`,children:e.jsx("canvas",{ref:d,width:A.width,height:A.height,className:"border-2 border-yellow-300 bg-white rounded cursor-crosshair",style:{touchAction:"none",maxWidth:"100%",height:"auto"},onMouseDown:tt,onMouseMove:st,onMouseUp:Re,onMouseLeave:Re,onTouchStart:ot,onTouchMove:nt,onTouchEnd:at,"aria-label":y?`Canvas para desenhar a palavra: ${L}`:"Canvas mostrando o desenho atual",role:y?"application":"img"})}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{onClick:lt,className:"bg-red-500 text-white px-3 py-1 rounded text-xs hover:bg-red-600 transition","aria-label":"Limpar desenho do canvas",children:"🗑️ Apagar"}),I&&e.jsx("div",{className:"text-xs text-yellow-200 flex items-center",children:"💡 Modo horizontal ativo - mais espaço para desenhar!"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-blue-200 font-bold mb-2",children:"Adivinhe o desenho!"}),e.jsx("div",{ref:C,className:"w-full mb-2",children:e.jsx("canvas",{ref:d,width:A.width,height:A.height,className:"border-2 border-yellow-300 bg-white rounded mx-auto",style:{touchAction:"none",cursor:"not-allowed",maxWidth:"100%",height:"auto"}})}),e.jsxs("form",{onSubmit:rt,className:"flex gap-1 mb-2",children:[e.jsx("input",{type:"text",className:"p-1 rounded text-blue-900 flex-1 text-sm",placeholder:_?"Você acertou!":"Digite seu palpite...",value:q,onChange:t=>ie(t.target.value),disabled:_,autoComplete:"off","aria-label":"Campo para digitar palpite do desenho",role:"textbox"}),e.jsx("button",{type:"submit",className:"bg-yellow-300 text-blue-900 px-2 py-1 rounded font-semibold text-xs hover:bg-yellow-400 transition",disabled:_,"aria-label":"Enviar palpite",children:"➤"})]}),e.jsx("div",{className:"max-h-20 overflow-y-auto bg-white/20 rounded p-1 text-left text-xs",role:"log","aria-live":"polite","aria-label":"Lista de palpites dos jogadores",children:Ue.slice(-5).map((t,s)=>e.jsxs("div",{className:t.correct?"text-green-300 font-bold":"text-white",children:[e.jsxs("span",{className:"font-semibold",children:[t.name,":"]})," ",t.text,t.correct&&e.jsx("span",{className:"ml-1 text-[10px]",role:"img","aria-label":"correto",children:"✓"})]},s))})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm mb-2",children:"Aguardando início do jogo..."}),e.jsxs("div",{className:"flex justify-center items-center gap-2 text-xs",children:[e.jsxs("span",{children:["Código da sala: ",e.jsx("span",{className:"font-bold text-yellow-300",children:r})]}),e.jsx("button",{onClick:Ee,className:"bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700 transition",children:"🔗"})]})]})})]}),g&&e.jsxs("div",{className:"mt-2 text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-yellow-300",children:["⏱️ ",_e,"s"]}),ve.length>0&&e.jsx("div",{className:"mt-1 bg-blue-800/50 rounded-lg p-1 max-w-sm mx-auto",children:e.jsx("div",{className:"text-yellow-200 text-xs",children:(De=ve.slice(-1)[0])==null?void 0:De.hint})})]}),de&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none p-2 sm:p-4",children:e.jsxs("div",{className:"bg-green-500 text-white text-lg sm:text-xl md:text-4xl font-extrabold px-4 py-3 sm:px-6 sm:py-4 md:px-12 md:py-8 rounded-xl shadow-2xl border-4 border-white animate-pulse text-center",children:[de," acertou a palavra!"]})}),Oe&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none p-2 sm:p-4",children:e.jsx("div",{className:"bg-red-500 text-white text-lg sm:text-xl md:text-3xl font-extrabold px-4 py-3 sm:px-6 sm:py-4 md:px-10 md:py-6 rounded-xl shadow-2xl border-4 border-white animate-pulse text-center",children:"Tempo esgotado! A ronda terminou."})}),he!==null&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none p-2 sm:p-4",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`order-1 text-4xl sm:text-5xl md:text-7xl font-extrabold px-8 sm:px-12 md:px-16 py-6 sm:py-8 md:py-10 rounded-xl shadow-2xl border-4 border-white mb-2 ${Y===K?"bg-gradient-to-r from-pink-500 via-yellow-400 to-red-500 text-white animate-bounce":"bg-blue-800 text-white animate-pulse"}`,children:he}),e.jsxs("div",{className:"order-2 text-base sm:text-xl md:text-2xl font-bold text-yellow-200 mb-2",children:["Ronda: ",Y," de ",K]}),He&&e.jsx("div",{className:"order-3 fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:e.jsxs("div",{className:"relative flex flex-col items-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 rounded-xl animate-pulse"}),e.jsxs("div",{className:"relative z-10 px-4 sm:px-8 md:px-12 py-4 sm:py-6 md:py-8 rounded-xl border-4 sm:border-8 border-pink-400 shadow-2xl bg-gradient-to-r from-yellow-400 via-pink-500 to-red-500 animate-bounce flex flex-col items-center",children:[e.jsxs("span",{className:"text-3xl sm:text-5xl md:text-7xl font-extrabold text-white drop-shadow-lg mb-2 sm:mb-4 flex items-center gap-2 sm:gap-4",children:[e.jsx("span",{role:"img","aria-label":"trophy",children:"🏆"}),"ÚLTIMA RONDA!",e.jsx("span",{role:"img","aria-label":"trophy",children:"🏆"})]}),e.jsx("span",{className:"text-sm sm:text-xl md:text-2xl text-yellow-100 font-bold mt-1 sm:mt-2 text-center",children:"Dê o seu melhor, esta é a última chance!"})]})]})})]})}),pe&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/80 p-2",children:e.jsxs("div",{className:"bg-yellow-300 text-blue-900 rounded-xl shadow-2xl p-3 flex flex-col items-center border-4 border-white w-full max-w-sm max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-lg font-extrabold mb-2",children:"🏆 Pódio Final 🏆"}),e.jsx("ol",{className:"text-sm font-bold space-y-1 mb-2",children:pe.slice(0,3).map((t,s)=>e.jsxs("li",{className:s===0?"text-lg text-yellow-600":s===1?"text-base text-gray-700":"text-sm text-orange-700",children:[s===0&&"🥇 ",s===1&&"🥈 ",s===2&&"🥉 ",t.name," — ",t.score," pts"]},t.id))}),e.jsx("div",{className:"text-xs mb-2",children:"Parabéns a todos!"}),te&&e.jsxs("div",{className:"flex flex-col items-center gap-1 mt-2",children:[e.jsx("label",{className:"text-blue-900 font-bold text-sm",children:"Número de rondas:"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"grid grid-cols-5 gap-1",children:[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",className:`p-1 rounded text-xs font-bold transition min-w-6 ${R===t?"bg-yellow-400 text-blue-900 border-2 border-yellow-600":"bg-blue-200 text-blue-900 border-2 border-transparent hover:bg-blue-300"}`,onClick:()=>fe(t),children:t},t))}),e.jsx("div",{className:"grid grid-cols-5 gap-1 mb-1",children:[6,7,8,9,10].map(t=>e.jsx("button",{type:"button",className:`p-1 rounded text-xs font-bold transition min-w-6 ${R===t?"bg-yellow-400 text-blue-900 border-2 border-yellow-600":"bg-blue-200 text-blue-900 border-2 border-transparent hover:bg-blue-300"}`,onClick:()=>fe(t),children:t},t))}),e.jsxs("div",{className:"text-xs text-blue-700 text-center",children:[R<=3&&"⚡ Rápida (~3-5 min)",R>=4&&R<=6&&"⏱️ Média (~6-10 min)",R>=7&&R<=10&&"🕐 Longa (~12-15 min)"]})]}),e.jsx("button",{className:"bg-green-600 text-white px-4 py-1 rounded-lg font-bold mt-1 hover:bg-green-700 transition text-sm",onClick:()=>{const t=R&&R>=1&&R<=10?R:3;f.getSocket().emit("restart-game",{roomCode:r,rounds:t}),Z(null)},children:"Nova partida"})]}),!te&&e.jsx("div",{className:"text-blue-900 font-bold mt-2 text-sm text-center",children:"Aguardando o host iniciar nova partida..."}),e.jsx("button",{className:"bg-red-600 text-white px-4 py-1 rounded-lg font-bold mt-2 hover:bg-red-700 transition text-sm",onClick:ke,children:"Sair"})]})})]})]})}function Mt(){return e.jsx(ft,{children:e.jsxs(gt,{children:[e.jsx(z,{path:"/",element:e.jsx(Rt,{})}),e.jsx(z,{path:"/criar-sala",element:e.jsx(Dt,{})}),e.jsx(z,{path:"/entrar-sala",element:e.jsx(Me,{})}),e.jsx(z,{path:"/entrar-sala/:roomCode",element:e.jsx(Me,{})}),e.jsx(z,{path:"/sala/:roomCode",element:e.jsx(Lt,{})})]})})}ae.createRoot(document.getElementById("root")).render(e.jsx(wt.StrictMode,{children:e.jsx(Mt,{})}));
