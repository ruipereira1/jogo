import{r as ut,a as ht,g as bt,b as a,u as ee,c as Ue,B as pt,R as ft,d as W,e as gt}from"./vendor-DDqihXFt.js";import{l as wt}from"./socket-BLRFddlS.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))x(c);new MutationObserver(c=>{for(const p of c)if(p.type==="childList")for(const b of p.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&x(b)}).observe(document,{childList:!0,subtree:!0});function r(c){const p={};return c.integrity&&(p.integrity=c.integrity),c.referrerPolicy&&(p.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?p.credentials="include":c.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function x(c){if(c.ep)return;c.ep=!0;const p=r(c);fetch(c.href,p)}})();var xe={exports:{}},F={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Me;function vt(){if(Me)return F;Me=1;var n=ut(),l=Symbol.for("react.element"),r=Symbol.for("react.fragment"),x=Object.prototype.hasOwnProperty,c=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function b(j,d,k){var u,S={},E=null,I=null;k!==void 0&&(E=""+k),d.key!==void 0&&(E=""+d.key),d.ref!==void 0&&(I=d.ref);for(u in d)x.call(d,u)&&!p.hasOwnProperty(u)&&(S[u]=d[u]);if(j&&j.defaultProps)for(u in d=j.defaultProps,d)S[u]===void 0&&(S[u]=d[u]);return{$$typeof:l,type:j,key:E,ref:I,props:S,_owner:c.current}}return F.Fragment=r,F.jsx=b,F.jsxs=b,F}var Te;function jt(){return Te||(Te=1,xe.exports=vt()),xe.exports}var e=jt(),K={},$e;function yt(){if($e)return K;$e=1;var n=ht();return K.createRoot=n.createRoot,K.hydrateRoot=n.hydrateRoot,K}var Nt=yt();const Ct=bt(Nt),ue=()=>{a.useEffect(()=>{const n=document.querySelector('meta[name="viewport"]'),l=n?.getAttribute("content")||"width=device-width, initial-scale=1.0";if(n)n.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover");else{const r=document.createElement("meta");r.name="viewport",r.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover",document.getElementsByTagName("head")[0].appendChild(r)}return()=>{n&&n.setAttribute("content",l)}},[])};function kt(){const n=ee(),[l,r]=a.useState(!1),[x,c]=a.useState(null),[p,b]=a.useState(window.innerHeight>window.innerWidth?"portrait":"landscape");ue(),a.useEffect(()=>{const d=k=>{k.preventDefault(),c(k),r(!0)};return window.addEventListener("beforeinstallprompt",d),window.matchMedia("(display-mode: standalone)").matches&&r(!1),()=>{window.removeEventListener("beforeinstallprompt",d)}},[]),a.useEffect(()=>{const d=()=>{b(window.innerHeight>window.innerWidth?"portrait":"landscape")};return window.addEventListener("resize",d),window.addEventListener("orientationchange",d),()=>{window.removeEventListener("resize",d),window.removeEventListener("orientationchange",d)}},[]);const j=async()=>{if(x){x.prompt();const{outcome:d}=await x.userChoice;d==="accepted"&&r(!1),c(null)}};return e.jsxs("div",{className:"min-h-screen-safe flex flex-col items-center justify-center bg-gradient-to-br from-blue-900 via-blue-700 to-blue-400 text-white mobile:p-2 sm:p-4 touch-manipulation no-scroll-bounce",children:[l&&e.jsxs("div",{className:"mobile-fixed-top bg-black/80 backdrop-blur-sm text-white p-3 text-center z-mobile-modal animate-slide-down",children:[e.jsx("p",{className:"text-sm mb-2",children:"📱 Instalar ArteRápida como app?"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("button",{onClick:j,className:"bg-blue-500 text-white px-4 py-1 rounded-lg text-sm hover:bg-blue-600 transition touch-optimized tap-feedback",children:"Instalar"}),e.jsx("button",{onClick:()=>r(!1),className:"bg-gray-500 text-white px-4 py-1 rounded-lg text-sm hover:bg-gray-600 transition touch-optimized tap-feedback",children:"Agora não"})]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 px-4 w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8 animate-bounce-gentle",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🎨"}),e.jsx("h1",{className:"text-2xl xs:text-3xl sm:text-4xl md:text-5xl font-bold mb-2 bg-gradient-to-r from-yellow-300 via-yellow-200 to-yellow-300 bg-clip-text text-transparent",children:"ArteRápida"}),e.jsx("p",{className:"mobile:text-sm-mobile sm:text-base md:text-lg text-blue-100 font-medium",children:"Desenhe, adivinhe e divirta-se!"})]}),e.jsxs("div",{className:"flex flex-col mobile:gap-3 sm:gap-4 w-full",children:[e.jsxs("button",{className:"ios-button mobile:min-h-touch bg-gradient-to-r from-yellow-400 to-yellow-300 text-blue-900 mobile:px-6 mobile:py-4 sm:px-8 sm:py-4 rounded-2xl font-bold shadow-xl hover:shadow-2xl transition-all duration-300 mobile:text-base-mobile sm:text-lg flex items-center justify-center gap-3 tap-feedback transform hover:scale-105",onClick:()=>n("/criar-sala"),children:[e.jsx("span",{className:"text-2xl",children:"🎮"}),"Criar Sala"]}),e.jsxs("button",{className:"ios-button mobile:min-h-touch bg-white/20 backdrop-blur-sm text-white mobile:px-6 mobile:py-4 sm:px-8 sm:py-4 rounded-2xl font-bold shadow-xl hover:shadow-2xl transition-all duration-300 mobile:text-base-mobile sm:text-lg flex items-center justify-center gap-3 tap-feedback border border-white/30 hover:bg-white/30",onClick:()=>n("/entrar-sala"),children:[e.jsx("span",{className:"text-2xl",children:"🚪"}),"Entrar em Sala"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-8 w-full",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-3 text-center border border-white/20",children:[e.jsx("div",{className:"text-2xl mb-1",children:"👥"}),e.jsx("div",{className:"mobile:text-xs-mobile sm:text-sm font-medium",children:"Até 8 jogadores"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-3 text-center border border-white/20",children:[e.jsx("div",{className:"text-2xl mb-1",children:"📱"}),e.jsx("div",{className:"mobile:text-xs-mobile sm:text-sm font-medium",children:"Mobile-friendly"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-3 text-center border border-white/20",children:[e.jsx("div",{className:"text-2xl mb-1",children:"🎯"}),e.jsx("div",{className:"mobile:text-xs-mobile sm:text-sm font-medium",children:"3 dificuldades"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-3 text-center border border-white/20",children:[e.jsx("div",{className:"text-2xl mb-1",children:"💬"}),e.jsx("div",{className:"mobile:text-xs-mobile sm:text-sm font-medium",children:"Chat em tempo real"})]})]})]}),e.jsx("div",{className:"mt-auto pb-safe-bottom pt-8 text-center",children:e.jsxs("div",{className:"mobile:text-xs sm:text-sm text-blue-100/80 space-y-1",children:[e.jsx("p",{children:"Versão 2.0 - Otimizada para mobile 📱"}),e.jsx("p",{children:"© 2025 ArteRápida - Dev Rui Valentim"}),p==="landscape"&&window.innerHeight<500&&e.jsx("p",{className:"text-yellow-300 animate-pulse-fast",children:"💡 Rotacione para melhor experiência"})]})}),!1]})}const St="https://jogo-0vuq.onrender.com",Rt=St,Et={autoConnect:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:2e4,transports:["websocket","polling"],upgrade:!0,rememberUpgrade:!0,path:"/socket.io/",withCredentials:!0,forceNew:!1,extraHeaders:{Origin:"https://desenharapido.netlify.app"}};class Dt{socket=null;user=null;reconnectAttempts=0;maxReconnectAttempts=5;reconnectInterval=null;isConnected=!1;reconnectData={roomCode:"",userName:""};connect(){return this.socket||(this.socket=wt(Rt,Et),this.socket.on("connect",()=>{this.isConnected=!0,this.reconnectAttempts=0,this.reconnectData.roomCode&&this.attemptRoomReconnection()}),this.socket.on("disconnect",l=>{this.isConnected=!1,(l==="transport error"||l==="transport close")&&this.socket?.connect()}),this.socket.on("upgrading",l=>{}),this.socket.on("upgrade",l=>{}),this.socket.on("connect_error",l=>{this.showConnectionError()}),this.socket.on("reconnect",l=>{this.isConnected=!0,this.reconnectAttempts=0}),this.socket.on("reconnect_error",l=>{this.reconnectAttempts++}),this.socket.on("reconnect_failed",()=>{this.showConnectionError()})),this.socket}shouldAttemptReconnect(){const l=localStorage.getItem("currentRoomCode"),r=localStorage.getItem("currentUserName");return!!(l&&r&&this.user)}async attemptRoomReconnection(){const{roomCode:l,userName:r}=this.reconnectData;if(!l||!r)return;const x=await this.reconnectToRoom(r,l);x.success?window.dispatchEvent(new CustomEvent("roomReconnected",{detail:x.gameState})):this.clearReconnectData()}handleReconnection(){this.reconnectAttempts<this.maxReconnectAttempts&&!this.reconnectInterval&&(this.reconnectInterval=setInterval(()=>{if(this.socket?.connected){this.reconnectInterval&&(clearInterval(this.reconnectInterval),this.reconnectInterval=null);return}console.log(`Tentativa de reconexão ${this.reconnectAttempts+1}/${this.maxReconnectAttempts}`),this.reconnectAttempts++,this.reconnectAttempts>=this.maxReconnectAttempts&&(this.reconnectInterval&&(clearInterval(this.reconnectInterval),this.reconnectInterval=null),this.showConnectionError())},2e3))}showConnectionError(){window.dispatchEvent(new CustomEvent("connectionError"))}clearRoomData(){localStorage.removeItem("currentRoomCode"),localStorage.removeItem("currentUserName")}disconnect(){this.socket&&(this.clearRoomData(),this.socket.disconnect(),this.socket=null),this.reconnectInterval&&(clearInterval(this.reconnectInterval),this.reconnectInterval=null)}getSocket(){return this.socket?this.socket:this.connect()}setUser(l){this.user=l,localStorage.setItem("currentUserName",l.name)}getUser(){return this.user}createRoom(l,r=3,x="facil"){const c=this.getSocket();return new Promise((p,b)=>{c.emit("create-room",{userName:l,rounds:r,difficulty:x},j=>{j.success&&j.roomCode?(this.setUser({id:c.id??"",name:l}),localStorage.setItem("currentRoomCode",j.roomCode),p(j.roomCode)):b(j.error||"Erro ao criar sala")})})}joinRoom(l,r){const x=this.getSocket();return new Promise((c,p)=>{x.emit("join-room",{userName:l,roomCode:r},b=>{b.success?(this.setUser({id:x.id??"",name:l}),localStorage.setItem("currentRoomCode",r),c()):p(b.error||"Erro ao entrar na sala")})})}leaveRoom(){this.clearRoomData(),this.user=null}async reconnectToRoom(l,r){return{success:!0,gameState:{status:"connected",round:1,maxRounds:3,currentDrawer:"John",isDrawer:!0,timeLeft:120}}}clearReconnectData(){this.reconnectData={roomCode:"",userName:""}}}const y=new Dt;function At(){const[n,l]=a.useState(""),[r,x]=a.useState(!1),[c,p]=a.useState(""),[b,j]=a.useState(3),[d,k]=a.useState("facil"),u=ee();ue(),a.useEffect(()=>(y.connect(),()=>{y.getUser()||y.disconnect()}),[]);const S=async m=>{m.preventDefault(),x(!0),p("");try{const C=await y.createRoom(n,b,d);u(`/sala/${C}`)}catch(C){p(C instanceof Error?C.message:"Erro ao criar sala"),console.error("Erro ao criar sala:",C)}finally{x(!1)}},E=m=>{switch(m){case"facil":return{emoji:"🟢",name:"Fácil",desc:"Palavras simples"};case"medio":return{emoji:"🟡",name:"Médio",desc:"Palavras moderadas"};case"dificil":return{emoji:"🔴",name:"Difícil",desc:"Palavras complexas"};default:return{emoji:"🟢",name:"Fácil",desc:"Palavras simples"}}},I=E(d);return e.jsxs("div",{className:"min-h-screen-safe flex flex-col items-center justify-center bg-gradient-to-br from-blue-900 via-blue-700 to-blue-400 text-white mobile:p-3 sm:p-4 touch-manipulation no-scroll-bounce",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-4xl mb-2",children:"🎮"}),e.jsx("h2",{className:"mobile:text-xl sm:text-2xl md:text-3xl font-bold mb-2",children:"Criar Nova Sala"}),e.jsx("p",{className:"mobile:text-sm-mobile sm:text-base text-blue-100",children:"Configure sua partida personalizada"})]}),c&&e.jsxs("div",{className:"bg-red-500/90 backdrop-blur-sm text-white p-3 rounded-xl mb-4 w-full max-w-sm text-center mobile:text-sm-mobile sm:text-sm animate-slide-down border border-red-400",children:["❌ ",c]}),e.jsx("div",{className:"w-full max-w-sm bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 shadow-2xl p-6",children:e.jsxs("form",{onSubmit:S,className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-white mobile:text-sm-mobile sm:text-sm font-medium",children:"👤 Seu nome"}),e.jsx("input",{className:"w-full ios-button mobile:min-h-touch p-3 rounded-xl text-blue-900 mobile:text-base-mobile sm:text-base placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-yellow-300 transition",type:"text",placeholder:"Digite seu nome...",value:n,onChange:m=>l(m.target.value),required:!0,disabled:r,maxLength:20})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-white mobile:text-sm-mobile sm:text-sm font-medium",children:"🎯 Número de rondas"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[1,2,3,4,5].map(m=>e.jsx("button",{type:"button",className:`ios-button mobile:min-h-touch p-2 rounded-xl mobile:text-sm-mobile sm:text-base font-bold transition-all transform ${b===m?"bg-yellow-300 text-blue-900 scale-105 shadow-lg border-2 border-yellow-500":"bg-white/20 text-white border border-white/30 hover:bg-white/30 tap-feedback"}`,onClick:()=>j(m),disabled:r,children:m},m))}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[6,7,8,9,10].map(m=>e.jsx("button",{type:"button",className:`ios-button mobile:min-h-touch p-2 rounded-xl mobile:text-sm-mobile sm:text-base font-bold transition-all transform ${b===m?"bg-yellow-300 text-blue-900 scale-105 shadow-lg border-2 border-yellow-500":"bg-white/20 text-white border border-white/30 hover:bg-white/30 tap-feedback"}`,onClick:()=>j(m),disabled:r,children:m},m))}),e.jsx("div",{className:"text-center p-2 bg-blue-800/50 rounded-lg border border-blue-600/50",children:e.jsxs("div",{className:"mobile:text-xs-mobile sm:text-sm text-yellow-200 font-medium",children:[b<=3&&"⚡ Partida rápida (~3-5 min)",b>=4&&b<=6&&"⏱️ Partida média (~6-10 min)",b>=7&&b<=10&&"🕐 Partida longa (~12-15 min)"]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-white mobile:text-sm-mobile sm:text-sm font-medium",children:"🎲 Dificuldade"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["facil","medio","dificil"].map(m=>{const C=E(m);return e.jsxs("button",{type:"button",className:`ios-button mobile:min-h-touch p-3 rounded-xl transition-all transform ${d===m?"bg-yellow-300 text-blue-900 scale-105 shadow-lg border-2 border-yellow-500":"bg-white/20 text-white border border-white/30 hover:bg-white/30 tap-feedback"}`,onClick:()=>k(m),disabled:r,children:[e.jsx("div",{className:"text-lg mb-1",children:C.emoji}),e.jsx("div",{className:"mobile:text-xs-mobile sm:text-sm font-bold",children:C.name})]},m)})}),e.jsx("div",{className:"text-center p-2 bg-purple-800/50 rounded-lg border border-purple-600/50",children:e.jsxs("div",{className:"mobile:text-xs-mobile sm:text-sm text-purple-200",children:[I.emoji," ",I.desc]})})]}),e.jsx("button",{className:`ios-button mobile:min-h-touch w-full ${r?"bg-gray-400/50 cursor-not-allowed":"bg-gradient-to-r from-yellow-400 to-yellow-300 hover:from-yellow-300 hover:to-yellow-200 transform hover:scale-105"} text-blue-900 mobile:py-4 sm:py-4 px-6 rounded-2xl font-bold shadow-xl transition-all duration-300 mobile:text-base-mobile sm:text-lg flex items-center justify-center gap-3 tap-feedback`,type:"submit",disabled:r||!n.trim(),children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-900"}),"Criando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xl",children:"🚀"}),"Criar Sala"]})})]})}),e.jsxs("button",{onClick:()=>u("/"),className:"mt-6 ios-button text-white hover:text-yellow-300 mobile:text-sm-mobile sm:text-base font-medium flex items-center gap-2 px-4 py-2 rounded-xl transition tap-feedback",children:[e.jsx("span",{children:"⬅️"}),"Voltar ao início"]}),e.jsx("div",{className:"mt-6 w-full max-w-sm",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl p-4 border border-white/10",children:[e.jsx("h3",{className:"mobile:text-sm-mobile sm:text-base font-semibold mb-2 text-yellow-300",children:"💡 Dicas:"}),e.jsxs("ul",{className:"mobile:text-xs-mobile sm:text-sm text-blue-100 space-y-1",children:[e.jsx("li",{children:"• Escolha um nome fácil de ler"}),e.jsx("li",{children:"• 3-5 rondas é ideal para jogos rápidos"}),e.jsx("li",{children:"• Dificuldade média é perfeita para iniciantes"}),e.jsx("li",{children:"• Partilhe o código com os seus amigos!"})]})]})})]})}function Pe(){const[n,l]=a.useState(""),[r,x]=a.useState(""),[c,p]=a.useState(!1),[b,j]=a.useState(""),[d,k]=a.useState(""),[u,S]=a.useState(!1),[E,I]=a.useState(""),m=ee(),{code:C}=Ue();ue(),a.useEffect(()=>(C&&x(C.toUpperCase()),y.connect(),()=>{y.getUser()||y.disconnect()}),[C]);const L=async f=>{f.preventDefault(),p(!0),j("");try{if(r.length!==6)throw new Error("O código da sala deve ter 6 caracteres");await y.joinRoom(n,r.toUpperCase()),m(`/sala/${r.toUpperCase()}`)}catch(g){j(g instanceof Error?g.message:"Erro ao entrar na sala")}finally{p(!1)}},te=f=>{const g=f.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,6);x(g)},P=async()=>{try{const f=await navigator.clipboard.readText(),g=f.match(/\/entrar-sala\/([A-Z0-9]{6})/i);if(g){x(g[1].toUpperCase()),k("Código da sala detectado automaticamente!"),setTimeout(()=>k(""),3e3);return}const R=f.match(/[A-Z0-9]{6}/);if(R)x(R[0]);else{const U=f.replace(/[^A-Z0-9]/gi,"").slice(0,6).toUpperCase();U.length>0&&x(U)}}catch{}},$=async()=>{try{if(I(""),S(!0),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Câmara não suportada neste dispositivo");const f=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),g=document.createElement("video");g.srcObject=f,g.setAttribute("playsinline","true"),g.play(),g.addEventListener("loadedmetadata",()=>{const R=document.createElement("canvas"),U=R.getContext("2d"),O=()=>{if(g.readyState===g.HAVE_ENOUGH_DATA){R.width=g.videoWidth,R.height=g.videoHeight,U?.drawImage(g,0,0,R.width,R.height);const _=U?.getImageData(0,0,R.width,R.height);setTimeout(()=>{f.getTracks().forEach(B=>B.stop()),S(!1),k("QR scanner funcionando! (Implementação da detecção em desenvolvimento)"),setTimeout(()=>k(""),3e3)},3e3)}u&&requestAnimationFrame(O)};O()})}catch(f){I(f instanceof Error?f.message:"Erro ao aceder à câmara"),S(!1)}},H=()=>{S(!1),I(""),navigator.mediaDevices.getUserMedia({video:!0}).then(f=>{f.getTracks().forEach(g=>g.stop())}).catch(()=>{})};return e.jsxs("div",{className:"min-h-screen-safe flex flex-col items-center justify-center bg-gradient-to-br from-blue-900 via-blue-700 to-blue-400 text-white mobile:p-3 sm:p-4 touch-manipulation no-scroll-bounce",children:[u&&e.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-4 max-w-sm w-full relative",children:[e.jsx("button",{onClick:H,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-xl z-10",children:"✕"}),e.jsx("h3",{className:"text-blue-900 text-lg font-bold mb-4 text-center",children:"📱 Scanner QR"}),e.jsx("div",{className:"bg-gray-100 rounded-lg p-4 mb-4 text-center",children:e.jsxs("div",{className:"inline-block p-4 bg-blue-100 rounded-lg",children:[e.jsx("div",{className:"text-4xl mb-2",children:"📷"}),e.jsx("p",{className:"text-blue-900 text-sm",children:"A aceder à câmara..."})]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 text-xs mb-2",children:"📋 Aponte a câmara para o QR code da sala"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"O código será detectado automaticamente"})]}),e.jsx("button",{onClick:H,className:"w-full mt-4 bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600 transition",children:"Cancelar"})]})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-4xl mb-2",children:"🚪"}),e.jsx("h2",{className:"mobile:text-xl sm:text-2xl md:text-3xl font-bold mb-2",children:"Entrar em Sala"}),e.jsx("p",{className:"mobile:text-sm-mobile sm:text-base text-blue-100",children:"Digite o código da sala para participar"})]}),b&&e.jsxs("div",{className:"bg-red-500/90 backdrop-blur-sm text-white p-3 rounded-xl mb-4 w-full max-w-sm text-center mobile:text-sm-mobile sm:text-sm animate-slide-down border border-red-400",children:["❌ ",b]}),d&&e.jsxs("div",{className:"bg-green-500/90 backdrop-blur-sm text-white p-3 rounded-xl mb-4 w-full max-w-sm text-center mobile:text-sm-mobile sm:text-sm animate-slide-down border border-green-400",children:["✅ ",d]}),E&&e.jsxs("div",{className:"bg-orange-500/90 backdrop-blur-sm text-white p-3 rounded-xl mb-4 w-full max-w-sm text-center mobile:text-sm-mobile sm:text-sm animate-slide-down border border-orange-400",children:["📱 ",E]}),e.jsx("div",{className:"w-full max-w-sm bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 shadow-2xl p-6",children:e.jsxs("form",{onSubmit:L,className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-white mobile:text-sm-mobile sm:text-sm font-medium",children:"👤 Seu nome"}),e.jsx("input",{className:"w-full ios-button mobile:min-h-touch p-3 rounded-xl text-blue-900 mobile:text-base-mobile sm:text-base placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-yellow-300 transition",type:"text",placeholder:"Digite seu nome...",value:n,onChange:f=>l(f.target.value),required:!0,disabled:c,maxLength:20})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-white mobile:text-sm-mobile sm:text-sm font-medium",children:"🔑 Código da sala"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"w-full ios-button mobile:min-h-touch p-3 pr-16 rounded-xl text-blue-900 mobile:text-base-mobile sm:text-base placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-yellow-300 transition font-mono tracking-wider text-center uppercase",type:"text",placeholder:"ABC123",value:r,onChange:f=>te(f.target.value),required:!0,disabled:c,maxLength:6,style:{letterSpacing:"0.2em"}}),e.jsx("button",{type:"button",onClick:P,className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-blue-500/70 hover:bg-blue-500 text-white p-2 rounded-lg transition tap-feedback",disabled:c,title:"Colar código",children:"📋"})]}),e.jsx("div",{className:"flex justify-center space-x-1",children:[...Array(6)].map((f,g)=>e.jsx("div",{className:`w-3 h-3 rounded-full transition-all ${g<r.length?"bg-yellow-300 scale-110":"bg-white/30"}`},g))}),r.length>0&&r.length<6&&e.jsxs("p",{className:"text-center mobile:text-xs-mobile sm:text-sm text-yellow-200",children:[6-r.length," caracteres restantes"]})]}),e.jsx("button",{className:`ios-button mobile:min-h-touch w-full ${c?"bg-gray-400/50 cursor-not-allowed":"bg-gradient-to-r from-green-400 to-green-300 hover:from-green-300 hover:to-green-200 transform hover:scale-105"} text-blue-900 mobile:py-4 sm:py-4 px-6 rounded-2xl font-bold shadow-xl transition-all duration-300 mobile:text-base-mobile sm:text-lg flex items-center justify-center gap-3 tap-feedback`,type:"submit",disabled:c||!n.trim()||r.length!==6,children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-900"}),"Entrando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xl",children:"🎯"}),"Entrar na Sala"]})})]})}),e.jsxs("div",{className:"mt-6 w-full max-w-sm space-y-3",children:[typeof navigator<"u"&&navigator.mediaDevices&&"getUserMedia"in navigator.mediaDevices&&e.jsxs("button",{onClick:$,disabled:c||u,className:`w-full ios-button ${u?"bg-orange-500/50":"bg-purple-500/20 hover:bg-purple-500/30"} text-white mobile:py-3 sm:py-3 px-4 rounded-xl font-medium mobile:text-sm-mobile sm:text-base flex items-center justify-center gap-3 tap-feedback border ${u?"border-orange-400/50":"border-purple-400/30"} transition-all`,children:[e.jsx("span",{className:"text-lg",children:u?"📷":"📱"}),u?"A escanear...":"Ler código QR"]}),e.jsxs("button",{onClick:()=>m("/"),className:"w-full ios-button text-white hover:text-yellow-300 mobile:py-3 sm:py-3 px-4 rounded-xl font-medium mobile:text-sm-mobile sm:text-base flex items-center justify-center gap-3 tap-feedback",children:[e.jsx("span",{children:"⬅️"}),"Voltar ao início"]})]}),e.jsx("div",{className:"mt-6 w-full max-w-sm",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl p-4 border border-white/10",children:[e.jsx("h3",{className:"mobile:text-sm-mobile sm:text-base font-semibold mb-2 text-yellow-300",children:"❓ Como funciona:"}),e.jsxs("ul",{className:"mobile:text-xs-mobile sm:text-sm text-blue-100 space-y-1",children:[e.jsx("li",{children:"• Peça o código de 6 caracteres ao host"}),e.jsx("li",{children:"• O código aparece no topo da tela do host"}),e.jsx("li",{children:"• Pode colar o código diretamente"}),e.jsx("li",{children:"• Códigos expiram quando a sala é fechada"})]})]})}),C&&e.jsx("div",{className:"mt-4 w-full max-w-sm",children:e.jsx("div",{className:"bg-green-800/30 backdrop-blur-sm rounded-xl p-3 border border-green-600/50",children:e.jsxs("p",{className:"text-center mobile:text-xs-mobile sm:text-sm text-green-200",children:["✅ Código detectado: ",e.jsx("span",{className:"font-mono font-bold",children:C})]})})})]})}function It(){const{roomCode:n}=Ue(),l=ee(),[r,x]=a.useState([]),[c,p]=a.useState(!0),[b,j]=a.useState(""),[d,k]=a.useState(!1),[u,S]=a.useState(!1),[E,I]=a.useState(null),m=a.useRef(null),C=a.useRef(null),[L,te]=a.useState({width:500,height:350}),[P,$]=a.useState([]),[H,f]=a.useState(!1),[g,R]=a.useState(""),[U,O]=a.useState([]),[_,B]=a.useState(!1),[he,se]=a.useState(null),[V,be]=a.useState(null),[ae,pe]=a.useState(1),[Q,oe]=a.useState(0),[ze,ne]=a.useState(!1),[fe,ge]=a.useState(null),[we,re]=a.useState(null),[M,ve]=a.useState(3),[le,je]=a.useState(1),Oe=y.getUser(),ie=r.find(t=>t.id===Oe?.id)?.isHost,[_e,He]=a.useState(!1),[qe,N]=a.useState(!1),[We,T]=a.useState(""),[Fe,ye]=a.useState(!1),[Ne,Be]=a.useState([]),[Mt,Ce]=a.useState(null),[G,Ve]=a.useState([]),[ce,ke]=a.useState(""),[Qe,Se]=a.useState(!1),[Re,Ge]=a.useState([]),[Je,Ee]=a.useState(!1),[Tt,de]=a.useState(!1),[J,me]=a.useState("connected"),[z,Ye]=a.useState(!1),[Y,Xe]=a.useState(!1),q=a.useRef([]),D=(t,s)=>{const h=window.setTimeout(()=>{t(),q.current=q.current.filter(w=>w!==h)},s);return q.current.push(h),h},Ze=()=>{q.current.forEach(t=>window.clearTimeout(t)),q.current=[]};a.useEffect(()=>{const t=document.querySelector('meta[name="viewport"]');if(t)t.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no");else{const s=document.createElement("meta");s.name="viewport",s.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no",document.getElementsByTagName("head")[0].appendChild(s)}return()=>{t&&t.setAttribute("content","width=device-width, initial-scale=1.0")}},[]);const X=()=>{if(C.current){const t=C.current.clientWidth,s=window.innerWidth,h=window.innerHeight;let w,o;z?(w=Math.min(t-10,s-20),o=Math.floor(Math.min(w*.6,h*.4))):(s<480?w=Math.min(300,t-10):s<768?w=Math.min(400,t-15):w=Math.min(500,t-20),o=Math.floor(w*.7)),te({width:w,height:o})}};a.useEffect(()=>(X(),window.addEventListener("resize",X),()=>window.removeEventListener("resize",X)),[]),a.useEffect(()=>{X()},[z]),a.useEffect(()=>{const t=()=>{const s=window.innerHeight<window.innerWidth&&window.innerHeight<=600;Xe(s)};return t(),window.addEventListener("resize",t),window.addEventListener("orientationchange",t),()=>{window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)}},[]),a.useEffect(()=>{const t=y.getSocket(),s=y.getUser();if(!s||!n){l("/");return}t.on("player-joined",({players:o})=>{x(o)}),t.on("player-left",({players:o})=>{x(o),o.length===0&&l("/")}),t.on("players-update",({players:o,drawerId:i,round:v,maxRounds:A})=>{x(o),be(i),pe(v),A&&je(A)}),t.on("game-started",()=>{k(!0)}),t.on("round-start",({isDrawer:o,word:i})=>{S(o),I(o?i:null),O([]),B(!1),se(null)}),t.on("draw-line",o=>{$(i=>[...i,o])}),t.on("guess",({name:o,text:i,correct:v})=>{O(A=>[...A,{name:o,text:i,correct:v}]),v&&se(o),v&&o===y.getUser()?.name&&B(!0)}),t.on("clear-canvas",()=>{$([])}),t.on("timer-update",({timeLeft:o})=>{oe(o)}),t.on("round-ended",({reason:o,message:i})=>{o==="timeout"?(ne(!0),D(()=>ne(!1),4e3)):o==="drawer-left"&&(T(i||"O desenhista saiu da sala. Avançando para próxima ronda..."),N(!0),D(()=>N(!1),4e3))}),t.on("countdown",({value:o,round:i,maxRounds:v})=>{ge(o>0?o:null),He(i===v&&o>0&&o<=3)}),t.on("game-ended",({players:o})=>{const i=[...o].sort((v,A)=>A.score-v.score);re(i)}),t.on("game-restarted",()=>{re(null),ne(!1),ge(null),oe(0),se(null),O([]),k(!1)}),t.on("room-deleted",()=>{l("/")}),t.on("room-not-found",()=>{j("Sala não encontrada ou foi excluída"),setTimeout(()=>{l("/")},3e3)}),t.on("hint",({hint:o,type:i})=>{Be(v=>[...v,{hint:o,type:i}]),T(o),N(!0),D(()=>N(!1),4e3)}),t.on("word-reveal",({word:o})=>{Ce(o),T(`A palavra era: ${o}`),N(!0),D(()=>{N(!1),Ce(null)},5e3)}),t.on("chat-message",({name:o,message:i,timestamp:v})=>{Ve(A=>[...A,{name:o,message:i,timestamp:v}])}),t.on("connect",()=>{me("connected"),de(!1),n&&s&&t.emit("join-room",{userName:s.name,roomCode:n},o=>{o.success||j("Erro ao reconectar à sala")})}),t.on("disconnect",()=>{me("disconnected"),de(!0)}),t.on("reconnect",()=>{me("connected"),de(!1)}),t.on("player-temporarily-disconnected",({playerId:o,playerName:i})=>{T(`${i} foi temporariamente desconectado`),N(!0),D(()=>N(!1),3e3)}),t.on("player-reconnected",({playerId:o,playerName:i,players:v})=>{x(v),T(`${i} reconectou!`),N(!0),D(()=>N(!1),3e3)});const h=o=>{const{gameState:i}=o.detail;i&&(pe(i.round),je(i.maxRounds),be(i.currentDrawer),S(i.isDrawer),oe(i.timeLeft),T("Reconectado à sala com sucesso!"),N(!0),D(()=>N(!1),3e3))},w=()=>{j("Falha na conexão. Tentando reconectar..."),D(()=>{J==="disconnected"&&l("/")},1e4)};return window.addEventListener("roomReconnected",h),window.addEventListener("connectionError",w),p(!1),()=>{Ze(),t.off("player-joined"),t.off("player-left"),t.off("players-update"),t.off("draw-line"),t.off("guess"),t.off("clear-canvas"),t.off("timer-update"),t.off("round-ended"),t.off("countdown"),t.off("game-ended"),t.off("game-restarted"),t.off("room-deleted"),t.off("room-not-found"),t.off("hint"),t.off("word-reveal"),t.off("chat-message"),t.off("connect"),t.off("disconnect"),t.off("reconnect"),t.off("player-temporarily-disconnected"),t.off("player-reconnected"),window.removeEventListener("roomReconnected",h),window.removeEventListener("connectionError",w)}},[n,l,J]);const De=()=>{y.leaveRoom(),y.disconnect(),l("/")},Ke=()=>{y.getSocket().emit("start-game",{roomCode:n})},et=(t,s=500,h=350)=>({x:t.x/s*L.width,y:t.y/h*L.height}),Z=(t,s=500,h=350)=>({x:t.x*s/L.width,y:t.y*h/L.height}),tt=t=>{if(!u)return;f(!0);const s=m.current.getBoundingClientRect(),h=t.clientX-s.left,w=t.clientY-s.top,o=Z({x:h,y:w});$(i=>[...i,{points:[o]}])},st=t=>{if(!u||!H)return;const s=m.current.getBoundingClientRect(),h=t.clientX-s.left,w=t.clientY-s.top,o=Z({x:h,y:w});$(i=>{const v=[...i];return v[v.length-1].points.push(o),v})},at=t=>{if(!u)return;t.preventDefault(),t.stopPropagation(),f(!0);const s=t.touches[0],h=m.current.getBoundingClientRect(),w=s.clientX-h.left,o=s.clientY-h.top,i=Z({x:w,y:o});$(v=>[...v,{points:[i]}])},ot=t=>{if(!u||!H)return;t.preventDefault(),t.stopPropagation();const s=t.touches[0],h=m.current.getBoundingClientRect(),w=s.clientX-h.left,o=s.clientY-h.top,i=Z({x:w,y:o});$(v=>{const A=[...v];return A[A.length-1].points.push(i),A})},nt=t=>{if(!u)return;t.preventDefault(),t.stopPropagation(),f(!1);const s=y.getSocket(),h=P[P.length-1];h&&s.emit("draw-line",{roomCode:n,line:h})},Ae=()=>{if(!u)return;f(!1);const t=y.getSocket(),s=P[P.length-1];s&&t.emit("draw-line",{roomCode:n,line:s})};a.useEffect(()=>{const t=m.current;if(!t)return;const s=t.getContext("2d");s&&(s.clearRect(0,0,t.width,t.height),s.strokeStyle="#222",s.lineWidth=3,s.lineCap="round",P.forEach(h=>{s.beginPath(),h.points.forEach((w,o)=>{const i=et(w);o===0?s.moveTo(i.x,i.y):s.lineTo(i.x,i.y)}),s.stroke()}))},[P,L]);const rt=t=>{t.preventDefault(),!(!g.trim()||_)&&(y.getSocket().emit("guess",{roomCode:n,text:g}),R(""))},lt=()=>{$([]),y.getSocket().emit("clear-canvas",{roomCode:n})},it=async()=>{try{const s=`${window.location.origin}/entrar-sala/${n}`,h=`🎨 Venha jogar ArteRápida comigo! 

Clique no link e será automático:
${s}

Ou cole este link no campo "Código da sala" no jogo:
${s}

Sala: ${n}`,w=`whatsapp://send?text=${encodeURIComponent(h)}`,o=window.open(w,"_blank");T(o?"Link para WhatsApp aberto!":"Não foi possível abrir o WhatsApp. Verifique se pop-ups estão habilitados."),N(!0),D(()=>N(!1),3e3)}catch{Le()}},Ie=()=>{ye(!0)},ct=()=>{ye(!1)},Le=()=>{if(navigator.clipboard)navigator.clipboard.writeText(n||"");else{const t=document.createElement("textarea");t.value=n||"",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}T("Código da sala copiado!"),N(!0),D(()=>N(!1),3e3)},dt=t=>{t.preventDefault(),ce.trim()&&(y.getSocket().emit("chat-message",{roomCode:n,message:ce}),ke(""))},mt=()=>{y.getSocket().emit("get-word-history",{roomCode:n},t=>{t.success&&t.history&&(Ge(t.history),Ee(!0))})},xt=t=>new Date(t).toLocaleTimeString("pt-PT",{hour:"2-digit",minute:"2-digit"});return c?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-900 to-blue-400",children:e.jsx("div",{className:"text-white text-xl",children:"Carregando sala..."})}):b?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-blue-900 to-blue-400",children:[e.jsx("div",{className:"bg-red-500 text-white p-4 rounded-lg mb-4",children:b}),e.jsx("button",{onClick:()=>l("/"),className:"bg-white text-blue-900 px-6 py-2 rounded-lg font-semibold shadow hover:bg-gray-200 transition",children:"Voltar para Home"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 to-blue-400 text-white p-1 sm:p-2 overflow-x-hidden",children:[J!=="connected"&&e.jsx("div",{className:"fixed top-0 left-0 right-0 bg-red-600 text-white text-center py-1 z-50 text-xs",children:J==="reconnecting"?"🔄 Reconectando...":"❌ Sem conexão"}),Y&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-green-600/90 text-white px-3 py-2 rounded-lg shadow-lg z-40 text-xs backdrop-blur-sm border border-green-400/50",children:"📱 Modo Paisagem Ativo"}),qe&&e.jsx("div",{className:"fixed top-2 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-3 py-1 rounded-lg shadow-lg z-50 text-xs animate-fade-in-out",children:We}),Qe&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-2",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-3 max-w-sm w-full max-h-80 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h3",{className:"text-blue-900 text-base font-bold",children:"💬 Chat"}),e.jsx("button",{onClick:()=>Se(!1),className:"text-gray-500 hover:text-gray-700 text-lg",children:"✕"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-100 rounded p-2 mb-2 text-xs text-gray-800",children:G.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Sem mensagens ainda..."}):G.map((t,s)=>e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"font-semibold text-blue-900",children:t.name}),e.jsx("span",{className:"text-gray-500 text-[10px] ml-1",children:xt(t.timestamp)}),e.jsx("div",{className:"text-gray-800",children:t.message})]},s))}),e.jsxs("form",{onSubmit:dt,className:"flex gap-1",children:[e.jsx("input",{type:"text",value:ce,onChange:t=>ke(t.target.value),placeholder:"Digite sua mensagem...",className:"flex-1 p-2 border rounded text-gray-800 text-xs",autoComplete:"off"}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700 text-xs",children:"➤"})]})]})}),Je&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-2",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-3 max-w-sm w-full max-h-80 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h3",{className:"text-blue-900 text-base font-bold",children:"📚 Histórico"}),e.jsx("button",{onClick:()=>Ee(!1),className:"text-gray-500 hover:text-gray-700 text-lg",children:"✕"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto text-gray-800 text-xs",children:Re.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Nenhuma palavra ainda..."}):Re.map((t,s)=>e.jsxs("div",{className:"mb-2 p-2 bg-gray-100 rounded",children:[e.jsxs("div",{className:"font-semibold",children:["Ronda ",t.round]}),e.jsx("div",{className:"text-blue-900 font-bold",children:t.word}),e.jsxs("div",{className:"text-gray-600 text-[10px]",children:["Desenhista: ",t.drawer]}),t.guessedBy.length>0&&e.jsxs("div",{className:"text-green-600 text-[10px]",children:["Acertaram: ",t.guessedBy.join(", ")]})]},s))})]})}),Fe&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-2",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-3 max-w-sm w-full relative max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:ct,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-lg",children:"✕"}),e.jsx("h3",{className:"text-blue-900 text-base font-bold mb-2 text-center",children:"🔗 Compartilhar Sala"}),e.jsx("div",{className:"bg-blue-50 p-2 rounded-lg mb-3",children:e.jsxs("p",{className:"text-blue-800 text-xs text-center",children:["💡 ",e.jsx("strong",{children:"Dica:"})," O link direto carrega automaticamente o código da sala!"]})}),e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("p",{className:"text-gray-600 text-xs",children:"Código da sala:"}),e.jsxs("div",{className:"bg-blue-100 text-blue-900 font-mono text-lg font-bold p-2 rounded flex justify-center items-center gap-2 mb-2",children:[n,e.jsx("button",{onClick:Le,className:"text-blue-600 hover:text-blue-800 text-sm",children:"📋"})]}),e.jsxs("div",{className:"flex flex-col space-y-2 mb-3",children:[e.jsx("p",{className:"text-gray-600 text-xs",children:"Link direto:"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",value:`${window.location.origin}/entrar-sala/${n}`,readOnly:!0,className:"bg-gray-100 text-gray-800 p-1 rounded text-xs flex-1"}),e.jsx("button",{onClick:()=>{const t=`${window.location.origin}/entrar-sala/${n}`;if(navigator.clipboard)navigator.clipboard.writeText(t);else{const s=document.createElement("textarea");s.value=t,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s)}T("Link copiado!"),N(!0),D(()=>N(!1),3e3)},className:"bg-blue-600 text-white px-2 py-1 rounded text-xs hover:bg-blue-700",children:"📋"})]})]}),e.jsxs("div",{className:"flex justify-center gap-2 mb-3",children:[e.jsx("button",{onClick:it,className:"bg-green-600 text-white px-3 py-2 rounded font-medium hover:bg-green-700 transition flex items-center justify-center gap-1 text-xs",children:"📱 WhatsApp"}),navigator.share&&e.jsx("button",{onClick:()=>{const t=`${window.location.origin}/entrar-sala/${n}`;navigator.share({title:"ArteRápida - Jogo de Desenho",text:`🎨 Venha jogar ArteRápida comigo! Clique no link ou cole no campo "Código da sala". Sala: ${n}`,url:t}).then(()=>{T("Compartilhado!"),N(!0),D(()=>N(!1),3e3)}).catch(s=>{})},className:"bg-blue-600 text-white px-3 py-2 rounded font-medium hover:bg-blue-700 transition flex items-center justify-center gap-1 text-xs",children:"📤 Mais"})]}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("p",{className:"text-gray-600 text-xs mb-2",children:"📱 QR Code para partilhar:"}),e.jsx("div",{className:"bg-white p-3 rounded-xl shadow-lg inline-block",children:e.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(`${window.location.origin}/entrar-sala/${n}`)}`,alt:"QR Code da sala",className:"w-32 h-32 mx-auto",onError:t=>{t.currentTarget.style.display="none";const s=t.currentTarget.parentElement;s&&(s.innerHTML='<div class="w-32 h-32 bg-gray-100 rounded-lg flex items-center justify-center"><p class="text-gray-500 text-xs text-center">QR indisponível</p></div>')}})}),e.jsx("p",{className:"text-gray-500 text-xs mt-2",children:"🎯 Escaneie para entrar diretamente na sala"})]})]})]})}),e.jsxs("div",{className:`max-w-4xl mx-auto ${Y?"landscape-layout h-screen":""}`,children:[e.jsxs("div",{className:`flex flex-col gap-1 mb-2 ${Y?"landscape-sidebar p-2":""}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-base sm:text-lg font-bold",children:["Sala: ",n]}),e.jsxs("span",{className:"bg-blue-800 text-white px-2 py-1 rounded text-xs font-semibold",children:[r.length," jogador",r.length!==1?"es":""]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap justify-center",children:[e.jsxs("button",{onClick:()=>Se(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-xl text-sm font-medium transition-all tap-feedback flex items-center gap-2 shadow-lg",children:["💬 Chat",G.length>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-0.5 font-bold animate-pulse",children:G.length})]}),e.jsx("button",{onClick:mt,className:"bg-orange-600 hover:bg-orange-700 text-white px-3 py-2 rounded-xl text-sm font-medium transition-all tap-feedback shadow-lg",children:"📚 Histórico"}),e.jsx("button",{onClick:Ie,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-xl text-sm font-medium transition-all tap-feedback shadow-lg",children:"🔗 Partilhar"}),ie&&!d&&e.jsx("button",{onClick:Ke,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-xl text-sm font-bold transition-all tap-feedback shadow-lg animate-pulse",children:"▶️ INICIAR JOGO"}),e.jsx("button",{onClick:De,className:"bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded-xl text-sm font-medium transition-all tap-feedback flex items-center gap-2 shadow-lg",title:"Sair da sala","aria-label":"Sair da sala",children:"🚪 Sair"})]})]}),e.jsxs("div",{className:`flex flex-col gap-2 ${Y?"landscape-canvas overflow-y-auto":""}`,children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-3 shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h2",{className:"font-bold text-base text-white",children:["👥 Jogadores (",r.length,")"]}),e.jsx("div",{className:"bg-blue-800/50 px-3 py-1 rounded-full",children:e.jsxs("span",{className:"text-yellow-300 font-bold text-sm",children:["Ronda: ",ae||0,"/",le||1]})})]}),e.jsx("div",{className:"mobile-players grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:r.map(t=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-xl transition-all ${V===t.id?"bg-gradient-to-r from-yellow-400/20 to-yellow-300/20 border-2 border-yellow-300 shadow-lg":"bg-white/20 hover:bg-white/30"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("span",{className:"truncate text-white font-medium text-sm",children:t.name}),t.isHost&&e.jsx("span",{className:"text-yellow-300 text-base",title:"Host",children:"👑"}),V===t.id&&e.jsx("span",{className:"text-green-300 text-base animate-pulse",title:"Desenhando",children:"✏️"})]}),e.jsx("div",{className:"bg-yellow-300 text-blue-900 px-2 py-1 rounded-lg font-bold text-sm",children:t.score})]},t.id))})]}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-2 text-center",children:d?u?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-center mb-3",children:e.jsx("div",{className:"inline-block bg-gradient-to-r from-green-500 to-green-400 text-white px-4 py-2 rounded-2xl shadow-lg",children:e.jsx("p",{className:"text-lg font-bold",children:"✏️ Você está desenhando!"})})}),e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("p",{className:"text-white text-sm mb-2",children:"Desenhe esta palavra:"}),e.jsx("div",{className:"inline-block bg-yellow-300 text-blue-900 px-6 py-3 rounded-2xl shadow-xl border-2 border-yellow-400",children:e.jsx("span",{className:"font-mono text-2xl font-extrabold tracking-wider",children:E})})]})]}),e.jsx("div",{ref:C,className:`w-full mb-3 ${z?"flex justify-center":""}`,children:e.jsxs("div",{className:"relative",children:[e.jsx("canvas",{ref:m,width:L.width,height:L.height,className:"mobile-canvas border-4 border-yellow-300 bg-white rounded-lg shadow-xl cursor-crosshair",style:{touchAction:"none",maxWidth:"100%",height:"auto",WebkitUserSelect:"none",userSelect:"none"},onMouseDown:tt,onMouseMove:st,onMouseUp:Ae,onMouseLeave:Ae,onTouchStart:at,onTouchMove:ot,onTouchEnd:nt,"aria-label":u?`Canvas para desenhar a palavra: ${E}`:"Canvas mostrando o desenho atual",role:u?"application":"img"}),e.jsx("div",{className:"absolute top-2 left-2 bg-black/70 text-white px-2 py-1 rounded-md text-xs md:hidden",children:"✏️ Desenhe aqui"})]})}),e.jsxs("div",{className:"flex justify-center gap-3 flex-wrap",children:[e.jsx("button",{onClick:lt,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-lg transition-all tap-feedback","aria-label":"Limpar desenho do canvas",children:"🗑️ Apagar Tudo"}),e.jsx("button",{onClick:()=>Ye(!z),className:`px-4 py-2 rounded-xl text-sm font-bold shadow-lg transition-all tap-feedback ${z?"bg-yellow-300 text-blue-900 hover:bg-yellow-400":"bg-white/20 text-white hover:bg-white/30"}`,title:z?"Modo Normal":"Modo Horizontal",children:z?"📱 Normal":"📺 Horizontal"}),z&&e.jsx("div",{className:"text-sm text-yellow-200 flex items-center px-2 py-1 bg-blue-800/50 rounded-lg",children:"💡 Mais espaço para desenhar!"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"inline-block bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-2xl shadow-lg",children:e.jsx("p",{className:"text-lg font-bold",children:"🔍 Adivinhe o desenho!"})}),V&&e.jsxs("p",{className:"text-blue-200 text-sm mt-2",children:["🎨 ",r.find(t=>t.id===V)?.name," está desenhando"]})]}),e.jsx("div",{ref:C,className:"w-full mb-3",children:e.jsxs("div",{className:"relative",children:[e.jsx("canvas",{ref:m,width:L.width,height:L.height,className:"mobile-canvas border-4 border-yellow-300 bg-white rounded-lg shadow-xl mx-auto",style:{touchAction:"none",cursor:"not-allowed",maxWidth:"100%",height:"auto"}}),e.jsx("div",{className:"absolute top-2 left-2 bg-black/70 text-white px-2 py-1 rounded-md text-xs md:hidden",children:"👀 Observe o desenho"})]})}),e.jsxs("form",{onSubmit:rt,className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",className:"flex-1 p-3 rounded-xl text-blue-900 text-base font-medium shadow-lg border-2 border-yellow-300 focus:border-yellow-400 focus:outline-none transition-all",placeholder:_?"🎉 Você acertou!":"💭 Digite seu palpite...",value:g,onChange:t=>R(t.target.value),disabled:_,autoComplete:"off",autoCapitalize:"none",autoCorrect:"off",spellCheck:"false",style:{fontSize:"16px"},"aria-label":"Campo para digitar palpite do desenho",role:"textbox"}),e.jsx("button",{type:"submit",className:"bg-yellow-300 hover:bg-yellow-400 text-blue-900 px-4 py-3 rounded-xl font-bold text-base shadow-lg transition-all tap-feedback min-w-[60px]",disabled:_,"aria-label":"Enviar palpite",children:_?"✅":"➤"})]}),e.jsx("div",{className:"max-h-32 overflow-y-auto bg-white/20 backdrop-blur-sm rounded-xl p-3 text-left custom-scroll",role:"log","aria-live":"polite","aria-label":"Lista de palpites dos jogadores",children:U.length===0?e.jsx("div",{className:"text-white/70 text-sm text-center py-2",children:"💬 Nenhum palpite ainda..."}):U.slice(-5).map((t,s)=>e.jsxs("div",{className:`mb-1 p-2 rounded-lg transition-all ${t.correct?"bg-green-500/30 text-green-200 font-bold border border-green-400/50":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsxs("span",{className:"font-semibold text-yellow-300",children:[t.name,":"]}),e.jsx("span",{className:"ml-1 text-sm",children:t.text}),t.correct&&e.jsx("span",{className:"ml-2 text-green-300 font-bold",role:"img","aria-label":"correto",children:"✅ ACERTOU!"})]},s))})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm mb-2",children:"Aguardando início do jogo..."}),e.jsxs("div",{className:"flex justify-center items-center gap-2 text-xs",children:[e.jsxs("span",{children:["Código da sala: ",e.jsx("span",{className:"font-bold text-yellow-300",children:n})]}),e.jsx("button",{onClick:Ie,className:"bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700 transition",children:"🔗"})]})]})})]}),d&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-center mb-3",children:e.jsx("div",{className:`inline-block px-6 py-3 rounded-2xl shadow-xl transition-all ${Q<=10&&Q>0?"bg-red-500 text-white animate-pulse border-2 border-red-300":Q<=30?"bg-orange-500 text-white border-2 border-orange-300":"bg-yellow-300 text-blue-900 border-2 border-yellow-400"}`,children:e.jsxs("div",{className:"text-2xl font-extrabold",children:["⏱️ ",Q,"s"]})})}),Ne.length>0&&e.jsx("div",{className:"bg-gradient-to-r from-blue-800/70 to-purple-800/70 backdrop-blur-sm rounded-xl p-3 mx-auto max-w-md border border-blue-600/50 shadow-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-yellow-200 text-sm font-semibold mb-1",children:"💡 Dica:"}),e.jsx("div",{className:"text-white text-base font-medium",children:Ne.slice(-1)[0]?.hint})]})})]}),he&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none p-2 sm:p-4",children:e.jsxs("div",{className:"bg-green-500 text-white text-lg sm:text-xl md:text-4xl font-extrabold px-4 py-3 sm:px-6 sm:py-4 md:px-12 md:py-8 rounded-xl shadow-2xl border-4 border-white animate-pulse text-center",children:[he," acertou a palavra!"]})}),ze&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none p-2 sm:p-4",children:e.jsx("div",{className:"bg-red-500 text-white text-lg sm:text-xl md:text-3xl font-extrabold px-4 py-3 sm:px-6 sm:py-4 md:px-10 md:py-6 rounded-xl shadow-2xl border-4 border-white animate-pulse text-center",children:"Tempo esgotado! A ronda terminou."})}),fe!==null&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none p-2 sm:p-4",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`order-1 text-4xl sm:text-5xl md:text-7xl font-extrabold px-8 sm:px-12 md:px-16 py-6 sm:py-8 md:py-10 rounded-xl shadow-2xl border-4 border-white mb-2 ${ae===le?"bg-gradient-to-r from-pink-500 via-yellow-400 to-red-500 text-white animate-bounce":"bg-blue-800 text-white animate-pulse"}`,children:fe}),e.jsxs("div",{className:"order-2 text-base sm:text-xl md:text-2xl font-bold text-yellow-200 mb-2",children:["Ronda: ",ae," de ",le]}),_e&&e.jsx("div",{className:"order-3 fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:e.jsxs("div",{className:"relative flex flex-col items-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 rounded-xl animate-pulse"}),e.jsxs("div",{className:"relative z-10 px-4 sm:px-8 md:px-12 py-4 sm:py-6 md:py-8 rounded-xl border-4 sm:border-8 border-pink-400 shadow-2xl bg-gradient-to-r from-yellow-400 via-pink-500 to-red-500 animate-bounce flex flex-col items-center",children:[e.jsxs("span",{className:"text-3xl sm:text-5xl md:text-7xl font-extrabold text-white drop-shadow-lg mb-2 sm:mb-4 flex items-center gap-2 sm:gap-4",children:[e.jsx("span",{role:"img","aria-label":"trophy",children:"🏆"}),"ÚLTIMA RONDA!",e.jsx("span",{role:"img","aria-label":"trophy",children:"🏆"})]}),e.jsx("span",{className:"text-sm sm:text-xl md:text-2xl text-yellow-100 font-bold mt-1 sm:mt-2 text-center",children:"Dê o seu melhor, esta é a última chance!"})]})]})})]})}),we&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/80 p-2",children:e.jsxs("div",{className:"bg-yellow-300 text-blue-900 rounded-xl shadow-2xl p-3 flex flex-col items-center border-4 border-white w-full max-w-sm max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-lg font-extrabold mb-2",children:"🏆 Pódio Final 🏆"}),e.jsx("ol",{className:"text-sm font-bold space-y-1 mb-2",children:we.slice(0,3).map((t,s)=>e.jsxs("li",{className:s===0?"text-lg text-yellow-600":s===1?"text-base text-gray-700":"text-sm text-orange-700",children:[s===0&&"🥇 ",s===1&&"🥈 ",s===2&&"🥉 ",t.name," — ",t.score," pts"]},t.id))}),e.jsx("div",{className:"text-xs mb-2",children:"Parabéns a todos!"}),ie&&e.jsxs("div",{className:"flex flex-col items-center gap-1 mt-2",children:[e.jsx("label",{className:"text-blue-900 font-bold text-sm",children:"Número de rondas:"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"grid grid-cols-5 gap-1",children:[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",className:`p-1 rounded text-xs font-bold transition min-w-6 ${M===t?"bg-yellow-400 text-blue-900 border-2 border-yellow-600":"bg-blue-200 text-blue-900 border-2 border-transparent hover:bg-blue-300"}`,onClick:()=>ve(t),children:t},t))}),e.jsx("div",{className:"grid grid-cols-5 gap-1 mb-1",children:[6,7,8,9,10].map(t=>e.jsx("button",{type:"button",className:`p-1 rounded text-xs font-bold transition min-w-6 ${M===t?"bg-yellow-400 text-blue-900 border-2 border-yellow-600":"bg-blue-200 text-blue-900 border-2 border-transparent hover:bg-blue-300"}`,onClick:()=>ve(t),children:t},t))}),e.jsxs("div",{className:"text-xs text-blue-700 text-center",children:[M<=3&&"⚡ Rápida (~3-5 min)",M>=4&&M<=6&&"⏱️ Média (~6-10 min)",M>=7&&M<=10&&"🕐 Longa (~12-15 min)"]})]}),e.jsx("button",{className:"bg-green-600 text-white px-4 py-1 rounded-lg font-bold mt-1 hover:bg-green-700 transition text-sm",onClick:()=>{const t=M&&M>=1&&M<=10?M:3;y.getSocket().emit("restart-game",{roomCode:n,rounds:t}),re(null)},children:"Nova partida"})]}),!ie&&e.jsx("div",{className:"text-blue-900 font-bold mt-2 text-sm text-center",children:"Aguardando o host iniciar nova partida..."}),e.jsx("button",{className:"bg-red-600 text-white px-4 py-1 rounded-lg font-bold mt-2 hover:bg-red-700 transition text-sm",onClick:De,children:"Sair"})]})})]})]})}function Lt(){return e.jsx(pt,{children:e.jsxs(ft,{children:[e.jsx(W,{path:"/",element:e.jsx(kt,{})}),e.jsx(W,{path:"/criar-sala",element:e.jsx(At,{})}),e.jsx(W,{path:"/entrar-sala",element:e.jsx(Pe,{})}),e.jsx(W,{path:"/entrar-sala/:roomCode",element:e.jsx(Pe,{})}),e.jsx(W,{path:"/sala/:roomCode",element:e.jsx(It,{})})]})})}Ct.createRoot(document.getElementById("root")).render(e.jsx(gt.StrictMode,{children:e.jsx(Lt,{})}));
