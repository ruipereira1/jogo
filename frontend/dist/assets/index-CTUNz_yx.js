import{r as vt,a as wt,g as jt,b as s,u as ce,c as Xe,B as yt,R as Nt,d as ee,e as Ct}from"./vendor-DDqihXFt.js";import{l as kt}from"./socket-BLRFddlS.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))p(m);new MutationObserver(m=>{for(const v of m)if(v.type==="childList")for(const b of v.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&p(b)}).observe(document,{childList:!0,subtree:!0});function n(m){const v={};return m.integrity&&(v.integrity=m.integrity),m.referrerPolicy&&(v.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?v.credentials="include":m.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function p(m){if(m.ep)return;m.ep=!0;const v=n(m);fetch(m.href,v)}})();var ve={exports:{}},te={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ue;function St(){if(Ue)return te;Ue=1;var r=vt(),o=Symbol.for("react.element"),n=Symbol.for("react.fragment"),p=Object.prototype.hasOwnProperty,m=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,v={key:!0,ref:!0,__self:!0,__source:!0};function b(k,u,N){var g,w={},A=null,D=null;N!==void 0&&(A=""+N),u.key!==void 0&&(A=""+u.key),u.ref!==void 0&&(D=u.ref);for(g in u)p.call(u,g)&&!v.hasOwnProperty(g)&&(w[g]=u[g]);if(k&&k.defaultProps)for(g in u=k.defaultProps,u)w[g]===void 0&&(w[g]=u[g]);return{$$typeof:o,type:k,key:A,ref:D,props:w,_owner:m.current}}return te.Fragment=n,te.jsx=b,te.jsxs=b,te}var Ge;function Rt(){return Ge||(Ge=1,ve.exports=St()),ve.exports}var e=Rt(),ie={},Oe;function Et(){if(Oe)return ie;Oe=1;var r=wt();return ie.createRoot=r.createRoot,ie.hydrateRoot=r.hydrateRoot,ie}var At=Et();const Pt=jt(At),we=()=>{s.useEffect(()=>{const r=document.querySelector('meta[name="viewport"]'),o=r?.getAttribute("content")||"width=device-width, initial-scale=1.0";if(r)r.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover");else{const n=document.createElement("meta");n.name="viewport",n.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover",document.getElementsByTagName("head")[0].appendChild(n)}return()=>{r&&r.setAttribute("content",o)}},[])};function Mt(){const r=ce(),[o,n]=s.useState(!1),[p,m]=s.useState(null),[v,b]=s.useState(window.innerHeight>window.innerWidth?"portrait":"landscape");we(),s.useEffect(()=>{const u=N=>{N.preventDefault(),m(N),n(!0)};return window.addEventListener("beforeinstallprompt",u),window.matchMedia("(display-mode: standalone)").matches&&n(!1),()=>{window.removeEventListener("beforeinstallprompt",u)}},[]),s.useEffect(()=>{const u=()=>{b(window.innerHeight>window.innerWidth?"portrait":"landscape")};return window.addEventListener("resize",u),window.addEventListener("orientationchange",u),()=>{window.removeEventListener("resize",u),window.removeEventListener("orientationchange",u)}},[]);const k=async()=>{if(p){p.prompt();const{outcome:u}=await p.userChoice;u==="accepted"&&n(!1),m(null)}};return e.jsxs("div",{className:"min-h-screen-safe flex flex-col items-center justify-center bg-gradient-to-br from-blue-900 via-blue-700 to-blue-400 text-white mobile:p-2 sm:p-4 touch-manipulation no-scroll-bounce",children:[o&&e.jsxs("div",{className:"mobile-fixed-top bg-black/80 backdrop-blur-sm text-white p-3 text-center z-mobile-modal animate-slide-down",children:[e.jsx("p",{className:"text-sm mb-2",children:"📱 Instalar ArteRápida como app?"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("button",{onClick:k,className:"bg-blue-500 text-white px-4 py-1 rounded-lg text-sm hover:bg-blue-600 transition touch-optimized tap-feedback",children:"Instalar"}),e.jsx("button",{onClick:()=>n(!1),className:"bg-gray-500 text-white px-4 py-1 rounded-lg text-sm hover:bg-gray-600 transition touch-optimized tap-feedback",children:"Agora não"})]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 px-4 w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8 animate-bounce-gentle",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🎨"}),e.jsx("h1",{className:"text-2xl xs:text-3xl sm:text-4xl md:text-5xl font-bold mb-2 bg-gradient-to-r from-yellow-300 via-yellow-200 to-yellow-300 bg-clip-text text-transparent",children:"ArteRápida"}),e.jsx("p",{className:"mobile:text-sm-mobile sm:text-base md:text-lg text-blue-100 font-medium",children:"Desenhe, adivinhe e divirta-se!"})]}),e.jsxs("div",{className:"flex flex-col mobile:gap-3 sm:gap-4 w-full",children:[e.jsxs("button",{className:"ios-button mobile:min-h-touch bg-gradient-to-r from-yellow-400 to-yellow-300 text-blue-900 mobile:px-6 mobile:py-4 sm:px-8 sm:py-4 rounded-2xl font-bold shadow-xl hover:shadow-2xl transition-all duration-300 mobile:text-base-mobile sm:text-lg flex items-center justify-center gap-3 tap-feedback transform hover:scale-105",onClick:()=>r("/criar-sala"),children:[e.jsx("span",{className:"text-2xl",children:"🎮"}),"Criar Sala"]}),e.jsxs("button",{className:"ios-button mobile:min-h-touch bg-white/20 backdrop-blur-sm text-white mobile:px-6 mobile:py-4 sm:px-8 sm:py-4 rounded-2xl font-bold shadow-xl hover:shadow-2xl transition-all duration-300 mobile:text-base-mobile sm:text-lg flex items-center justify-center gap-3 tap-feedback border border-white/30 hover:bg-white/30",onClick:()=>r("/entrar-sala"),children:[e.jsx("span",{className:"text-2xl",children:"🚪"}),"Entrar em Sala"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-8 w-full",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-3 text-center border border-white/20",children:[e.jsx("div",{className:"text-2xl mb-1",children:"👥"}),e.jsx("div",{className:"mobile:text-xs-mobile sm:text-sm font-medium",children:"Até 8 jogadores"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-3 text-center border border-white/20",children:[e.jsx("div",{className:"text-2xl mb-1",children:"📱"}),e.jsx("div",{className:"mobile:text-xs-mobile sm:text-sm font-medium",children:"Mobile-friendly"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-3 text-center border border-white/20",children:[e.jsx("div",{className:"text-2xl mb-1",children:"🎯"}),e.jsx("div",{className:"mobile:text-xs-mobile sm:text-sm font-medium",children:"3 dificuldades"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-3 text-center border border-white/20",children:[e.jsx("div",{className:"text-2xl mb-1",children:"💬"}),e.jsx("div",{className:"mobile:text-xs-mobile sm:text-sm font-medium",children:"Chat em tempo real"})]})]})]}),e.jsx("div",{className:"mt-auto pb-safe-bottom pt-8 text-center",children:e.jsxs("div",{className:"mobile:text-xs sm:text-sm text-blue-100/80 space-y-1",children:[e.jsx("p",{children:"Versão 2.0 - Otimizada para mobile 📱"}),e.jsx("p",{children:"© 2025 ArteRápida - Dev Rui Valentim"}),v==="landscape"&&window.innerHeight<500&&e.jsx("p",{className:"text-yellow-300 animate-pulse-fast",children:"💡 Rotacione para melhor experiência"})]})}),!1]})}const Tt="https://jogo-0vuq.onrender.com",Lt=Tt,Dt={autoConnect:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:2e4,transports:["websocket","polling"],upgrade:!0,rememberUpgrade:!0,path:"/socket.io/",withCredentials:!0,forceNew:!1,extraHeaders:{Origin:"https://desenharapido.netlify.app"}};class It{socket=null;user=null;reconnectAttempts=0;maxReconnectAttempts=5;reconnectInterval=null;isConnected=!1;reconnectData={roomCode:"",userName:""};connect(){return this.socket||(this.socket=kt(Lt,Dt),this.socket.on("connect",()=>{this.isConnected=!0,this.reconnectAttempts=0,this.reconnectData.roomCode&&this.attemptRoomReconnection()}),this.socket.on("disconnect",o=>{this.isConnected=!1,(o==="transport error"||o==="transport close")&&this.socket?.connect()}),this.socket.on("upgrading",o=>{}),this.socket.on("upgrade",o=>{}),this.socket.on("connect_error",o=>{this.showConnectionError()}),this.socket.on("reconnect",o=>{this.isConnected=!0,this.reconnectAttempts=0}),this.socket.on("reconnect_error",o=>{this.reconnectAttempts++}),this.socket.on("reconnect_failed",()=>{this.showConnectionError()})),this.socket}shouldAttemptReconnect(){const o=localStorage.getItem("currentRoomCode"),n=localStorage.getItem("currentUserName");return!!(o&&n&&this.user)}async attemptRoomReconnection(){const{roomCode:o,userName:n}=this.reconnectData;if(!o||!n)return;const p=await this.reconnectToRoom(n,o);p.success?window.dispatchEvent(new CustomEvent("roomReconnected",{detail:p.gameState})):this.clearReconnectData()}handleReconnection(){this.reconnectAttempts<this.maxReconnectAttempts&&!this.reconnectInterval&&(this.reconnectInterval=setInterval(()=>{if(this.socket?.connected){this.reconnectInterval&&(clearInterval(this.reconnectInterval),this.reconnectInterval=null);return}console.log(`Tentativa de reconexão ${this.reconnectAttempts+1}/${this.maxReconnectAttempts}`),this.reconnectAttempts++,this.reconnectAttempts>=this.maxReconnectAttempts&&(this.reconnectInterval&&(clearInterval(this.reconnectInterval),this.reconnectInterval=null),this.showConnectionError())},2e3))}showConnectionError(){window.dispatchEvent(new CustomEvent("connectionError"))}clearRoomData(){localStorage.removeItem("currentRoomCode"),localStorage.removeItem("currentUserName")}disconnect(){this.socket&&(this.clearRoomData(),this.socket.disconnect(),this.socket=null),this.reconnectInterval&&(clearInterval(this.reconnectInterval),this.reconnectInterval=null)}getSocket(){return this.socket?this.socket:this.connect()}setUser(o){this.user=o,localStorage.setItem("currentUserName",o.name)}getUser(){return this.user}createRoom(o,n=3,p="facil"){const m=this.getSocket();return new Promise((v,b)=>{m.emit("create-room",{userName:o,rounds:n,difficulty:p,category:"all"},k=>{k.success&&k.roomCode?(this.setUser({id:m.id??"",name:o}),localStorage.setItem("currentRoomCode",k.roomCode),v(k.roomCode)):b(k.error||"Erro ao criar sala")})})}joinRoom(o,n){const p=this.getSocket();return new Promise((m,v)=>{p.emit("join-room",{userName:o,roomCode:n},b=>{b.success?(this.setUser({id:p.id??"",name:o}),localStorage.setItem("currentRoomCode",n),m()):v(b.error||"Erro ao entrar na sala")})})}leaveRoom(){this.clearRoomData(),this.user=null}async reconnectToRoom(o,n){return{success:!0,gameState:{status:"connected",round:1,maxRounds:3,currentDrawer:"John",isDrawer:!0,timeLeft:120}}}clearReconnectData(){this.reconnectData={roomCode:"",userName:""}}}const M=new It;function zt(){const[r,o]=s.useState(""),[n,p]=s.useState(!1),[m,v]=s.useState(""),[b,k]=s.useState(3),[u,N]=s.useState("facil"),g=ce();we(),s.useEffect(()=>(M.connect(),()=>{M.getUser()||M.disconnect()}),[]);const w=async h=>{h.preventDefault(),p(!0),v("");try{const E=await M.createRoom(r,b,u);g(`/sala/${E}`)}catch(E){v(E instanceof Error?E.message:"Erro ao criar sala"),console.error("Erro ao criar sala:",E)}finally{p(!1)}},A=h=>{switch(h){case"facil":return{emoji:"🟢",name:"Fácil",desc:"Palavras simples"};case"medio":return{emoji:"🟡",name:"Médio",desc:"Palavras moderadas"};case"dificil":return{emoji:"🔴",name:"Difícil",desc:"Palavras complexas"};default:return{emoji:"🟢",name:"Fácil",desc:"Palavras simples"}}},D=A(u);return e.jsxs("div",{className:"min-h-screen-safe flex flex-col items-center justify-center bg-gradient-to-br from-blue-900 via-blue-700 to-blue-400 text-white mobile:p-3 sm:p-4 touch-manipulation no-scroll-bounce",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-4xl mb-2",children:"🎮"}),e.jsx("h2",{className:"mobile:text-xl sm:text-2xl md:text-3xl font-bold mb-2",children:"Criar Nova Sala"}),e.jsx("p",{className:"mobile:text-sm-mobile sm:text-base text-blue-100",children:"Configure sua partida personalizada"})]}),m&&e.jsxs("div",{className:"bg-red-500/90 backdrop-blur-sm text-white p-3 rounded-xl mb-4 w-full max-w-sm text-center mobile:text-sm-mobile sm:text-sm animate-slide-down border border-red-400",children:["❌ ",m]}),e.jsx("div",{className:"w-full max-w-sm bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 shadow-2xl p-6",children:e.jsxs("form",{onSubmit:w,className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-white mobile:text-sm-mobile sm:text-sm font-medium",children:"👤 Seu nome"}),e.jsx("input",{className:"w-full ios-button mobile:min-h-touch p-3 rounded-xl text-blue-900 mobile:text-base-mobile sm:text-base placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-yellow-300 transition",type:"text",placeholder:"Digite seu nome...",value:r,onChange:h=>o(h.target.value),required:!0,disabled:n,maxLength:20})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-white mobile:text-sm-mobile sm:text-sm font-medium",children:"🎯 Número de rondas"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[1,2,3,4,5].map(h=>e.jsx("button",{type:"button",className:`ios-button mobile:min-h-touch p-2 rounded-xl mobile:text-sm-mobile sm:text-base font-bold transition-all transform ${b===h?"bg-yellow-300 text-blue-900 scale-105 shadow-lg border-2 border-yellow-500":"bg-white/20 text-white border border-white/30 hover:bg-white/30 tap-feedback"}`,onClick:()=>k(h),disabled:n,children:h},h))}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[6,7,8,9,10].map(h=>e.jsx("button",{type:"button",className:`ios-button mobile:min-h-touch p-2 rounded-xl mobile:text-sm-mobile sm:text-base font-bold transition-all transform ${b===h?"bg-yellow-300 text-blue-900 scale-105 shadow-lg border-2 border-yellow-500":"bg-white/20 text-white border border-white/30 hover:bg-white/30 tap-feedback"}`,onClick:()=>k(h),disabled:n,children:h},h))}),e.jsx("div",{className:"text-center p-2 bg-blue-800/50 rounded-lg border border-blue-600/50",children:e.jsxs("div",{className:"mobile:text-xs-mobile sm:text-sm text-yellow-200 font-medium",children:[b<=3&&"⚡ Partida rápida (~3-5 min)",b>=4&&b<=6&&"⏱️ Partida média (~6-10 min)",b>=7&&b<=10&&"🕐 Partida longa (~12-15 min)"]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-white mobile:text-sm-mobile sm:text-sm font-medium",children:"🎲 Dificuldade"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["facil","medio","dificil"].map(h=>{const E=A(h);return e.jsxs("button",{type:"button",className:`ios-button mobile:min-h-touch p-3 rounded-xl transition-all transform ${u===h?"bg-yellow-300 text-blue-900 scale-105 shadow-lg border-2 border-yellow-500":"bg-white/20 text-white border border-white/30 hover:bg-white/30 tap-feedback"}`,onClick:()=>N(h),disabled:n,children:[e.jsx("div",{className:"text-lg mb-1",children:E.emoji}),e.jsx("div",{className:"mobile:text-xs-mobile sm:text-sm font-bold",children:E.name})]},h)})}),e.jsx("div",{className:"text-center p-2 bg-purple-800/50 rounded-lg border border-purple-600/50",children:e.jsxs("div",{className:"mobile:text-xs-mobile sm:text-sm text-purple-200",children:[D.emoji," ",D.desc]})})]}),e.jsx("button",{className:`ios-button mobile:min-h-touch w-full ${n?"bg-gray-400/50 cursor-not-allowed":"bg-gradient-to-r from-yellow-400 to-yellow-300 hover:from-yellow-300 hover:to-yellow-200 transform hover:scale-105"} text-blue-900 mobile:py-4 sm:py-4 px-6 rounded-2xl font-bold shadow-xl transition-all duration-300 mobile:text-base-mobile sm:text-lg flex items-center justify-center gap-3 tap-feedback`,type:"submit",disabled:n||!r.trim(),children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-900"}),"Criando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xl",children:"🚀"}),"Criar Sala"]})})]})}),e.jsxs("button",{onClick:()=>g("/"),className:"mt-6 ios-button text-white hover:text-yellow-300 mobile:text-sm-mobile sm:text-base font-medium flex items-center gap-2 px-4 py-2 rounded-xl transition tap-feedback",children:[e.jsx("span",{children:"⬅️"}),"Voltar ao início"]}),e.jsx("div",{className:"mt-6 w-full max-w-sm",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl p-4 border border-white/10",children:[e.jsx("h3",{className:"mobile:text-sm-mobile sm:text-base font-semibold mb-2 text-yellow-300",children:"💡 Dicas:"}),e.jsxs("ul",{className:"mobile:text-xs-mobile sm:text-sm text-blue-100 space-y-1",children:[e.jsx("li",{children:"• Escolha um nome fácil de ler"}),e.jsx("li",{children:"• 3-5 rondas é ideal para jogos rápidos"}),e.jsx("li",{children:"• Dificuldade média é perfeita para iniciantes"}),e.jsx("li",{children:"• Partilhe o código com os seus amigos!"})]})]})})]})}function We(){const[r,o]=s.useState(""),[n,p]=s.useState(""),[m,v]=s.useState(!1),[b,k]=s.useState(""),[u,N]=s.useState(""),[g,w]=s.useState(!1),[A,D]=s.useState(""),h=ce(),{code:E}=Xe();we(),s.useEffect(()=>(E&&p(E.toUpperCase()),M.connect(),()=>{M.getUser()||M.disconnect()}),[E]);const l=async C=>{C.preventDefault(),v(!0),k("");try{if(n.length!==6)throw new Error("O código da sala deve ter 6 caracteres");await M.joinRoom(r,n.toUpperCase()),h(`/sala/${n.toUpperCase()}`)}catch(j){k(j instanceof Error?j.message:"Erro ao entrar na sala")}finally{v(!1)}},a=C=>{const j=C.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,6);p(j)},f=async()=>{try{const C=await navigator.clipboard.readText(),j=C.match(/\/entrar-sala\/([A-Z0-9]{6})/i);if(j){p(j[1].toUpperCase()),N("Código da sala detectado automaticamente!"),setTimeout(()=>N(""),3e3);return}const O=C.match(/[A-Z0-9]{6}/);if(O)p(O[0]);else{const W=C.replace(/[^A-Z0-9]/gi,"").slice(0,6).toUpperCase();W.length>0&&p(W)}}catch{}},P=async()=>{try{if(D(""),w(!0),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Câmara não suportada neste dispositivo");let C=null;try{C=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})}catch{try{C=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}})}catch{throw new Error("Não foi possível aceder à câmara. Verifique as permissões.")}}if(!C)throw new Error("Falha ao obter stream da câmara");const j=document.createElement("video");j.srcObject=C,j.setAttribute("playsinline","true"),j.setAttribute("muted","true");let O=!0;const W=()=>{O=!1,C&&C.getTracks().forEach(q=>q.stop()),j.remove()};j.addEventListener("loadedmetadata",()=>{if(!O){W();return}const q=document.createElement("canvas"),X=q.getContext("2d");if(!X)throw W(),new Error("Não foi possível criar contexto do canvas");const i=()=>{if(!O||!g){W();return}j.readyState===j.HAVE_ENOUGH_DATA&&(q.width=j.videoWidth,q.height=j.videoHeight,X.drawImage(j,0,0,q.width,q.height)),requestAnimationFrame(i)};j.play().then(()=>{i(),setTimeout(()=>{O&&(W(),w(!1),N("Scanner QR implementado com sucesso! (Biblioteca de detecção pendente)"),setTimeout(()=>N(""),3e3))},3e3)}).catch(d=>{throw W(),new Error("Erro ao reproduzir vídeo da câmara")})}),j.addEventListener("error",()=>{throw W(),new Error("Erro no stream de vídeo")})}catch(C){const j=C instanceof Error?C.message:"Erro desconhecido ao aceder à câmara";D(j),w(!1)}},L=()=>{w(!1),D(""),navigator.mediaDevices.getUserMedia({video:!0}).then(C=>{C.getTracks().forEach(j=>j.stop())}).catch(()=>{})};return e.jsxs("div",{className:"min-h-screen-safe flex flex-col items-center justify-center bg-gradient-to-br from-blue-900 via-blue-700 to-blue-400 text-white mobile:p-3 sm:p-4 touch-manipulation no-scroll-bounce",children:[g&&e.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-4 max-w-sm w-full relative",children:[e.jsx("button",{onClick:L,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-xl z-10",children:"✕"}),e.jsx("h3",{className:"text-blue-900 text-lg font-bold mb-4 text-center",children:"📱 Scanner QR"}),e.jsx("div",{className:"bg-gray-100 rounded-lg p-4 mb-4 text-center",children:e.jsxs("div",{className:"inline-block p-4 bg-blue-100 rounded-lg",children:[e.jsx("div",{className:"text-4xl mb-2",children:"📷"}),e.jsx("p",{className:"text-blue-900 text-sm",children:"A aceder à câmara..."})]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 text-xs mb-2",children:"📋 Aponte a câmara para o QR code da sala"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"O código será detectado automaticamente"})]}),e.jsx("button",{onClick:L,className:"w-full mt-4 bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600 transition",children:"Cancelar"})]})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-4xl mb-2",children:"🚪"}),e.jsx("h2",{className:"mobile:text-xl sm:text-2xl md:text-3xl font-bold mb-2",children:"Entrar em Sala"}),e.jsx("p",{className:"mobile:text-sm-mobile sm:text-base text-blue-100",children:"Digite o código da sala para participar"})]}),b&&e.jsxs("div",{className:"bg-red-500/90 backdrop-blur-sm text-white p-3 rounded-xl mb-4 w-full max-w-sm text-center mobile:text-sm-mobile sm:text-sm animate-slide-down border border-red-400",children:["❌ ",b]}),u&&e.jsxs("div",{className:"bg-green-500/90 backdrop-blur-sm text-white p-3 rounded-xl mb-4 w-full max-w-sm text-center mobile:text-sm-mobile sm:text-sm animate-slide-down border border-green-400",children:["✅ ",u]}),A&&e.jsxs("div",{className:"bg-orange-500/90 backdrop-blur-sm text-white p-3 rounded-xl mb-4 w-full max-w-sm text-center mobile:text-sm-mobile sm:text-sm animate-slide-down border border-orange-400",children:["📱 ",A]}),e.jsx("div",{className:"w-full max-w-sm bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 shadow-2xl p-6",children:e.jsxs("form",{onSubmit:l,className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-white mobile:text-sm-mobile sm:text-sm font-medium",children:"👤 Seu nome"}),e.jsx("input",{className:"w-full ios-button mobile:min-h-touch p-3 rounded-xl text-blue-900 mobile:text-base-mobile sm:text-base placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-yellow-300 transition",type:"text",placeholder:"Digite seu nome...",value:r,onChange:C=>o(C.target.value),required:!0,disabled:m,maxLength:20})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-white mobile:text-sm-mobile sm:text-sm font-medium",children:"🔑 Código da sala"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"w-full ios-button mobile:min-h-touch p-3 pr-16 rounded-xl text-blue-900 mobile:text-base-mobile sm:text-base placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-yellow-300 transition font-mono tracking-wider text-center uppercase",type:"text",placeholder:"ABC123",value:n,onChange:C=>a(C.target.value),required:!0,disabled:m,maxLength:6,style:{letterSpacing:"0.2em"}}),e.jsx("button",{type:"button",onClick:f,className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-blue-500/70 hover:bg-blue-500 text-white p-2 rounded-lg transition tap-feedback",disabled:m,title:"Colar código",children:"📋"})]}),e.jsx("div",{className:"flex justify-center space-x-1",children:[...Array(6)].map((C,j)=>e.jsx("div",{className:`w-3 h-3 rounded-full transition-all ${j<n.length?"bg-yellow-300 scale-110":"bg-white/30"}`},j))}),n.length>0&&n.length<6&&e.jsxs("p",{className:"text-center mobile:text-xs-mobile sm:text-sm text-yellow-200",children:[6-n.length," caracteres restantes"]})]}),e.jsx("button",{className:`ios-button mobile:min-h-touch w-full ${m?"bg-gray-400/50 cursor-not-allowed":"bg-gradient-to-r from-green-400 to-green-300 hover:from-green-300 hover:to-green-200 transform hover:scale-105"} text-blue-900 mobile:py-4 sm:py-4 px-6 rounded-2xl font-bold shadow-xl transition-all duration-300 mobile:text-base-mobile sm:text-lg flex items-center justify-center gap-3 tap-feedback`,type:"submit",disabled:m||!r.trim()||n.length!==6,children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-900"}),"Entrando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xl",children:"🎯"}),"Entrar na Sala"]})})]})}),e.jsxs("div",{className:"mt-6 w-full max-w-sm space-y-3",children:[typeof navigator<"u"&&navigator.mediaDevices&&"getUserMedia"in navigator.mediaDevices&&e.jsxs("button",{onClick:P,disabled:m||g,className:`w-full ios-button ${g?"bg-orange-500/50":"bg-purple-500/20 hover:bg-purple-500/30"} text-white mobile:py-3 sm:py-3 px-4 rounded-xl font-medium mobile:text-sm-mobile sm:text-base flex items-center justify-center gap-3 tap-feedback border ${g?"border-orange-400/50":"border-purple-400/30"} transition-all`,children:[e.jsx("span",{className:"text-lg",children:g?"📷":"📱"}),g?"A escanear...":"Ler código QR"]}),e.jsxs("button",{onClick:()=>h("/"),className:"w-full ios-button text-white hover:text-yellow-300 mobile:py-3 sm:py-3 px-4 rounded-xl font-medium mobile:text-sm-mobile sm:text-base flex items-center justify-center gap-3 tap-feedback",children:[e.jsx("span",{children:"⬅️"}),"Voltar ao início"]})]}),e.jsx("div",{className:"mt-6 w-full max-w-sm",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl p-4 border border-white/10",children:[e.jsx("h3",{className:"mobile:text-sm-mobile sm:text-base font-semibold mb-2 text-yellow-300",children:"❓ Como funciona:"}),e.jsxs("ul",{className:"mobile:text-xs-mobile sm:text-sm text-blue-100 space-y-1",children:[e.jsx("li",{children:"• Peça o código de 6 caracteres ao host"}),e.jsx("li",{children:"• O código aparece no topo da tela do host"}),e.jsx("li",{children:"• Pode colar o código diretamente"}),e.jsx("li",{children:"• Códigos expiram quando a sala é fechada"})]})]})}),E&&e.jsx("div",{className:"mt-4 w-full max-w-sm",children:e.jsx("div",{className:"bg-green-800/30 backdrop-blur-sm rounded-xl p-3 border border-green-600/50",children:e.jsxs("p",{className:"text-center mobile:text-xs-mobile sm:text-sm text-green-200",children:["✅ Código detectado: ",e.jsx("span",{className:"font-mono font-bold",children:E})]})})})]})}const $t=(r,o)=>{let n;return function(...m){const v=()=>{clearTimeout(n),r(...m)};clearTimeout(n),n=window.setTimeout(v,o)}},qe=({isDrawer:r,onDraw:o,lines:n,onClear:p,disabled:m=!1,className:v=""})=>{const b=s.useRef(null),k=s.useRef(null),[u,N]=s.useState(!1),[g,w]=s.useState([]),[A,D]=s.useState({width:500,height:350}),[h,E]=s.useState({type:"pen",color:"#000000",size:3,opacity:1}),l=s.useMemo(()=>({cursor:r&&!m?(h.type==="eraser","crosshair"):"default",touchAction:"none"}),[r,m,h.type]),a=s.useCallback($t(()=>{if(k.current){const i=k.current.getBoundingClientRect(),d=Math.min(i.width-20,600),S=Math.floor(d*.7);D({width:d,height:S})}},100),[]);s.useEffect(()=>(a(),window.addEventListener("resize",a),window.addEventListener("orientationchange",a),()=>{window.removeEventListener("resize",a),window.removeEventListener("orientationchange",a)}),[a]),s.useEffect(()=>{q()},[n,A]);const f=s.useCallback((i,d=A)=>({x:i.x/d.width,y:i.y/d.height,pressure:i.pressure}),[A]),P=s.useCallback((i,d=A)=>({x:i.x*d.width,y:i.y*d.height,pressure:i.pressure}),[A]),L=s.useCallback(i=>{const d=b.current;if(!d)return{x:0,y:0};const S=d.getBoundingClientRect(),I=d.width/S.width,R=d.height/S.height;let G,H,V=1;if("touches"in i){const Z=i.touches[0]||i.changedTouches[0];G=Z.clientX,H=Z.clientY,V=Z.force||1}else G=i.clientX,H=i.clientY,V=i.pressure||1;return{x:(G-S.left)*I,y:(H-S.top)*R,pressure:V}},[]),C=s.useCallback(i=>{if(!r||m)return;i.preventDefault(),N(!0);const d=L(i);w([d])},[r,m,L]),j=s.useCallback(i=>{if(!u||!r||m)return;i.preventDefault();const d=L(i);w(S=>{const I=[...S,d];return W(S[S.length-1],d,h),I})},[u,r,m,L,h]),O=s.useCallback(()=>{if(!u||g.length===0)return;N(!1);const i={points:g.map(d=>f(d)),tool:h,timestamp:Date.now()};o({type:"draw",line:i,tool:h}),w([])},[u,g,f,h,o]),W=s.useCallback((i,d,S)=>{const I=b.current;if(!I||!i)return;const R=I.getContext("2d");if(!R)return;R.save(),S.type==="eraser"?(R.globalCompositeOperation="destination-out",R.lineWidth=S.size*2):(R.globalCompositeOperation="source-over",R.strokeStyle=S.color,R.lineWidth=S.size,R.globalAlpha=S.opacity),R.lineCap="round",R.lineJoin="round",d.pressure&&d.pressure!==1&&(R.lineWidth*=d.pressure),R.beginPath();const G={x:(i.x+d.x)/2,y:(i.y+d.y)/2};R.moveTo(i.x,i.y),R.quadraticCurveTo(i.x,i.y,G.x,G.y),R.stroke(),R.restore()},[]),q=s.useCallback(()=>{const i=b.current;if(!i)return;const d=i.getContext("2d");d&&(d.clearRect(0,0,i.width,i.height),n.forEach(S=>{if(S.points.length<2)return;const I=S.points.map(R=>P(R));d.save(),S.tool.type==="eraser"?(d.globalCompositeOperation="destination-out",d.lineWidth=S.tool.size*2):(d.globalCompositeOperation="source-over",d.strokeStyle=S.tool.color,d.lineWidth=S.tool.size,d.globalAlpha=S.tool.opacity),d.lineCap="round",d.lineJoin="round",d.beginPath(),d.moveTo(I[0].x,I[0].y);for(let R=1;R<I.length;R++){const G=I[R],H=I[R-1],V={x:(H.x+G.x)/2,y:(H.y+G.y)/2};d.quadraticCurveTo(H.x,H.y,V.x,V.y)}d.stroke(),d.restore()}))},[n,P]),X=s.useMemo(()=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-100 rounded-lg mb-2",children:[e.jsx("div",{className:"flex gap-1",children:["pen","brush","marker","eraser"].map(i=>e.jsx("button",{onClick:()=>E(d=>({...d,type:i})),className:`px-2 py-1 rounded text-xs ${h.type===i?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,title:i==="pen"?"Caneta":i==="brush"?"Pincel":i==="marker"?"Marcador":"Borracha",children:i==="pen"?"✏️":i==="brush"?"🖌️":i==="marker"?"🖊️":"🧹"},i))}),h.type!=="eraser"&&e.jsx("input",{type:"color",value:h.color,onChange:i=>E(d=>({...d,color:i.target.value})),className:"w-8 h-8 rounded border-none cursor-pointer",title:"Cor"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Tamanho:"}),e.jsx("input",{type:"range",min:"1",max:"20",value:h.size,onChange:i=>E(d=>({...d,size:parseInt(i.target.value)})),className:"w-16"}),e.jsx("span",{className:"text-xs text-gray-600 w-6",children:h.size})]}),e.jsx("button",{onClick:p,className:"px-3 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600",title:"Limpar desenho",children:"🗑️ Limpar"})]}),[h,p]);return e.jsxs("div",{ref:k,className:`flex flex-col ${v}`,children:[r&&!m&&X,e.jsxs("div",{className:"relative border-2 border-gray-300 rounded-lg overflow-hidden bg-white",children:[e.jsx("canvas",{ref:b,width:A.width,height:A.height,style:l,onMouseDown:C,onMouseMove:j,onMouseUp:O,onMouseLeave:O,onTouchStart:C,onTouchMove:j,onTouchEnd:O,className:"block"}),m&&e.jsx("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-30 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-semibold",children:"🔒 Aguarde sua vez"})})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1 text-center",children:["Canvas: ",A.width,"x",A.height," | Linhas: ",n.length," | Ferramenta: ",h.type," (",h.size,"px)"]})]})},_e=({className:r})=>e.jsx("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),Fe=({className:r})=>e.jsx("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})}),Be=({className:r})=>e.jsx("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Ut=({className:r})=>e.jsx("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"})}),Gt=({players:r,wordHistory:o,currentRound:n,maxRounds:p,isGameFinished:m,gameStats:v})=>{const[b,k]=s.useState("ranking"),u=s.useMemo(()=>r.map(l=>{const a=o.filter(L=>L.guessedBy.includes(l.name)),f=a.map(L=>L.responseTime).filter(L=>L!==void 0),P=o.filter(L=>L.drawer===l.name).length;return{...l,stats:{totalGuesses:a.length,correctGuesses:a.length,averageResponseTime:f.length>0?f.reduce((L,C)=>L+C,0)/f.length:0,fastestGuess:f.length>0?Math.min(...f):0,wordsDrawn:P,accuracy:a.length>0?100:0,pointsPerRound:l.score/Math.max(n,1)}}}),[r,o,n]),N=s.useMemo(()=>[...u].sort((l,a)=>a.score-l.score),[u]),g=s.useMemo(()=>{const l=o.reduce((f,P)=>f+P.guessedBy.length,0),a=o.filter(f=>f.guessedBy.length>0);return{totalWords:o.length,totalGuesses:l,averageGuessesPerWord:o.length>0?l/o.length:0,wordsGuessed:a.length,successRate:o.length>0?a.length/o.length*100:0,gamesProgress:n/p*100}},[o,n,p]),w=l=>l<1e3?`${l}ms`:`${(l/1e3).toFixed(1)}s`,A=l=>{switch(l){case 1:return"🥇";case 2:return"🥈";case 3:return"🥉";default:return`#${l}`}},D=()=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(Fe,{className:"w-5 h-5 text-yellow-500"}),"Ranking"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Ronda ",n," de ",p]})]}),N.map((l,a)=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${a===0?"bg-yellow-50 border-yellow-200":a===1?"bg-gray-50 border-gray-200":a===2?"bg-orange-50 border-orange-200":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-lg font-bold",children:A(a+1)}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold flex items-center gap-1",children:[l.name,l.isHost&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-600 px-1 rounded",children:"HOST"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[l.stats?.pointsPerRound.toFixed(1)," pts/ronda"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:l.score}),e.jsxs("div",{className:"text-xs text-gray-500",children:[l.stats?.correctGuesses||0," acertos"]})]})]},l.id))]}),h=()=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5 text-blue-500"}),"Histórico de Palavras"]}),o.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Nenhuma palavra foi jogada ainda"}):o.slice().reverse().map((l,a)=>e.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-lg",children:l.word}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Ronda ",l.round," • Desenhado por ",l.drawer]})]}),l.difficulty&&e.jsx("span",{className:`px-2 py-1 rounded text-xs ${l.difficulty==="facil"?"bg-green-100 text-green-600":l.difficulty==="medio"?"bg-yellow-100 text-yellow-600":"bg-red-100 text-red-600"}`,children:l.difficulty})]}),l.guessedBy.length>0?e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:["Acertaram (",l.guessedBy.length,"):"]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:l.guessedBy.map((f,P)=>e.jsx("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded text-xs",children:f},P))}),l.responseTime&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Tempo médio: ",w(l.responseTime)]})]}):e.jsx("div",{className:"text-sm text-red-500",children:"Ninguém acertou 😢"})]},a))]}),E=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(_e,{className:"w-5 h-5 text-green-500"}),"Estatísticas Gerais"]}),e.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Progresso do Jogo"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[n,"/",p," rondas"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${g.gamesProgress}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white border rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:g.totalWords}),e.jsx("div",{className:"text-sm text-gray-600",children:"Palavras Totais"})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-3 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[g.successRate.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Taxa de Sucesso"})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:g.totalGuesses}),e.jsx("div",{className:"text-sm text-gray-600",children:"Palpites Totais"})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:g.averageGuessesPerWord.toFixed(1)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Média/Palavra"})]})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(Ut,{className:"w-4 h-4 text-red-500"}),"Destaques da Partida"]}),u.length>0&&e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"🏆 Maior pontuação:"}),e.jsxs("span",{className:"font-semibold",children:[N[0]?.name," (",N[0]?.score," pts)"]})]}),(()=>{const l=u.reduce((a,f)=>(a.stats?.correctGuesses||0)>(f.stats?.correctGuesses||0)?a:f);return e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"🎯 Mais acertos:"}),e.jsxs("span",{className:"font-semibold",children:[l.name," (",l.stats?.correctGuesses||0,")"]})]})})(),(()=>{const l=u.filter(a=>a.stats?.fastestGuess&&a.stats.fastestGuess>0).reduce((a,f)=>(a.stats?.fastestGuess||1/0)<(f.stats?.fastestGuess||1/0)?a:f);return l.stats?.fastestGuess?e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"⚡ Mais rápido:"}),e.jsxs("span",{className:"font-semibold",children:[l.name," (",w(l.stats.fastestGuess),")"]})]}):null})()]})]})]});return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"flex space-x-1 mb-4 bg-white rounded-lg p-1",children:[{id:"ranking",label:"Ranking",icon:Fe},{id:"history",label:"Histórico",icon:Be},{id:"stats",label:"Estatísticas",icon:_e}].map(l=>e.jsxs("button",{onClick:()=>k(l.id),className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-md text-sm font-medium transition-colors ${b===l.id?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[e.jsx(l.icon,{className:"w-4 h-4"}),l.label]},l.id))}),e.jsxs("div",{className:"min-h-[300px]",children:[b==="ranking"&&e.jsx(D,{}),b==="history"&&e.jsx(h,{}),b==="stats"&&e.jsx(E,{})]})]})},Ot=({playerStats:r,onAchievementUnlocked:o})=>{const[n,p]=s.useState([]),[m,v]=s.useState(!1),[b,k]=s.useState(null),u=s.useMemo(()=>[{id:"first_win",title:"Primeira Vitória! 🏆",description:"Ganhe seu primeiro jogo",icon:"🏆",type:"bronze",condition:a=>a.totalGames>0&&a.totalScore>0,points:50,isUnlocked:!1},{id:"speed_demon",title:"Demônio da Velocidade ⚡",description:"Adivinhe uma palavra em menos de 3 segundos",icon:"⚡",type:"silver",condition:a=>a.fastestGuessTime>0&&a.fastestGuessTime<3e3,points:100,isUnlocked:!1},{id:"artist",title:"Artista Nato 🎨",description:"Desenhe 10 palavras que foram adivinhadas",icon:"🎨",type:"silver",condition:a=>a.totalDrawnWords>=10,points:100,isUnlocked:!1},{id:"detective",title:"Detetive 🔍",description:"Acerte 50 palavras",icon:"🔍",type:"gold",condition:a=>a.totalCorrectGuesses>=50,points:200,isUnlocked:!1},{id:"streak_master",title:"Mestre da Sequência 🔥",description:"Acerte 5 palavras seguidas",icon:"🔥",type:"gold",condition:a=>a.longestStreak>=5,points:200,isUnlocked:!1},{id:"perfectionist",title:"Perfeccionista 💎",description:"Complete um jogo acertando todas as palavras",icon:"💎",type:"platinum",condition:a=>a.perfectGames>=1,points:500,isUnlocked:!1},{id:"picasso",title:"Picasso Digital 🖼️",description:"Tenha todas as suas palavras adivinhadas em um jogo",icon:"🖼️",type:"platinum",condition:a=>a.artisticGames>=1,points:500,isUnlocked:!1},{id:"veteran",title:"Veterano 🎖️",description:"Jogue 100 partidas",icon:"🎖️",type:"platinum",condition:a=>a.totalGames>=100,points:1e3,isUnlocked:!1}],[]),N=s.useMemo(()=>[{level:1,title:"Novato",description:"Bem-vindo ao ArteRápida!",minXP:0,maxXP:100,color:"#8B5CF6",icon:"🌱",rewards:["Acesso básico"]},{level:2,title:"Aprendiz",description:"Está a aprender!",minXP:100,maxXP:300,color:"#06B6D4",icon:"📚",rewards:["Novas cores de pincel"]},{level:3,title:"Artista",description:"Tem jeito para isto!",minXP:300,maxXP:600,color:"#10B981",icon:"🎨",rewards:["Ferramentas avançadas"]},{level:4,title:"Especialista",description:"Conhece bem o jogo!",minXP:600,maxXP:1200,color:"#F59E0B",icon:"⭐",rewards:["Temas personalizados"]},{level:5,title:"Mestre",description:"Um verdadeiro mestre!",minXP:1200,maxXP:2e3,color:"#EF4444",icon:"👑",rewards:["Salas VIP"]},{level:6,title:"Lenda",description:"Uma lenda do ArteRápida!",minXP:2e3,maxXP:5e3,color:"#7C3AED",icon:"🏆",rewards:["Status de lenda"]},{level:7,title:"Imortal",description:"Alcançou a imortalidade!",minXP:5e3,maxXP:1/0,color:"#F97316",icon:"💫",rewards:["Reconhecimento eterno"]}],[]),g=s.useMemo(()=>n.reduce((a,f)=>a+f.points,0),[n]),w=s.useMemo(()=>N.find(a=>g>=a.minXP&&g<a.maxXP)||N[N.length-1],[g,N]),A=s.useMemo(()=>{if(w.level===N.length)return 100;N[w.level];const a=g-w.minXP,f=w.maxXP-w.minXP;return a/f*100},[w,g,N]);s.useEffect(()=>{u.forEach(a=>{if(!n.some(P=>P.id===a.id)&&a.condition(r)){const P={...a,isUnlocked:!0,unlockedAt:new Date};p(L=>[...L,P]),k(P),v(!0),o?.(P),setTimeout(()=>{v(!1)},3e3)}})},[r,u,n,o]);const D=a=>{switch(a){case"bronze":return"from-yellow-600 to-yellow-800";case"silver":return"from-gray-400 to-gray-600";case"gold":return"from-yellow-400 to-yellow-600";case"platinum":return"from-purple-400 to-purple-600";default:return"from-gray-400 to-gray-600"}},h=()=>e.jsxs("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:w.icon}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg",style:{color:w.color},children:["Nível ",w.level,": ",w.title]}),e.jsx("p",{className:"text-sm text-gray-600",children:w.description})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:g}),e.jsx("div",{className:"text-xs text-gray-500",children:"XP Total"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-500",style:{width:`${A}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Nível ",w.level]}),w.level<N.length&&e.jsxs("span",{children:["Próximo nível: ",w.maxXP-g," XP"]})]})]}),E=()=>e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:u.map(a=>{const f=n.some(P=>P.id===a.id);return e.jsxs("div",{className:`relative p-4 rounded-lg border transition-all duration-300 ${f?`bg-gradient-to-br ${D(a.type)} text-white shadow-lg transform hover:scale-105`:"bg-gray-100 text-gray-500 border-gray-300"}`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-3xl mb-2 ${f?"":"grayscale opacity-50"}`,children:a.icon}),e.jsx("h4",{className:`font-semibold text-sm mb-1 ${f?"text-white":"text-gray-700"}`,children:a.title}),e.jsx("p",{className:`text-xs ${f?"text-gray-100":"text-gray-500"}`,children:a.description}),e.jsxs("div",{className:`mt-2 text-xs font-bold ${f?"text-yellow-200":"text-gray-400"}`,children:["+",a.points," XP"]})]}),!f&&e.jsx("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-30 rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"text-2xl",children:"🔒"})})]},a.id)})}),l=()=>m&&b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-sm mx-4 text-center animate-bounce",children:[e.jsx("div",{className:"text-6xl mb-4",children:b.icon}),e.jsx("h2",{className:"text-2xl font-bold text-yellow-600 mb-2",children:"Conquista Desbloqueada!"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:b.title}),e.jsx("p",{className:"text-gray-600 mb-4",children:b.description}),e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:["+",b.points," XP"]}),e.jsx("button",{onClick:()=>v(!1),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Continuar"})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsx(h,{}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:["🏆 Conquistas",e.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",n.length,"/",u.length,")"]})]}),e.jsx(E,{})]}),e.jsx(l,{})]})};function Wt(){const{roomCode:r}=Xe(),o=ce(),[n,p]=s.useState([]),[m,v]=s.useState(!0),[b,k]=s.useState(""),[u,N]=s.useState(!1),[g,w]=s.useState(!1),[A,D]=s.useState(null),h=s.useRef(null),E=s.useRef(null),[l,a]=s.useState({width:500,height:350}),[f,P]=s.useState([]),[L,C]=s.useState(!1),[j,O]=s.useState(""),[W,q]=s.useState([]),[X,i]=s.useState(!1),[d,S]=s.useState(null),[I,R]=s.useState(null),[G,H]=s.useState(1),[V,Z]=s.useState(0),[He,de]=s.useState(!1),[je,ye]=s.useState(null),[me,xe]=s.useState(null),[J,Ne]=s.useState(3),[se,Ce]=s.useState(1),Ve=M.getUser(),ue=n.find(t=>t.id===Ve?.id)?.isHost,[Je,Qe]=s.useState(!1),[Ye,T]=s.useState(!1),[Ze,B]=s.useState(""),[Ke,ke]=s.useState(!1),[Se,et]=s.useState([]),[_t,Re]=s.useState(null),[ae,tt]=s.useState([]),[he,Ee]=s.useState(""),[st,Ae]=s.useState(!1),[be,at]=s.useState([]),[rt,Pe]=s.useState(!1),[Ft,pe]=s.useState(!1),[re,ge]=s.useState("connected"),[Y,nt]=s.useState(!1),[ne,ot]=s.useState(!1),[lt,Me]=s.useState({totalGames:0,totalCorrectGuesses:0,totalDrawnWords:0,fastestGuessTime:0,longestStreak:0,totalScore:0,averageScore:0,wordsGuessedInOrder:0,perfectGames:0,artisticGames:0}),[Te,fe]=s.useState(0),[Bt,Xt]=s.useState(!1),[Le,Ht]=s.useState("game"),K=s.useRef([]),F=(t,c)=>{const z=window.setTimeout(()=>{t(),K.current=K.current.filter($=>$!==z)},c);return K.current.push(z),z},it=()=>{K.current.forEach(t=>window.clearTimeout(t)),K.current=[]};s.useEffect(()=>{const t=document.querySelector('meta[name="viewport"]');if(t)t.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no");else{const c=document.createElement("meta");c.name="viewport",c.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no",document.getElementsByTagName("head")[0].appendChild(c)}return()=>{t&&t.setAttribute("content","width=device-width, initial-scale=1.0")}},[]);const oe=()=>{if(E.current){const t=E.current.clientWidth,c=window.innerWidth,z=window.innerHeight;let $,x;Y?($=Math.min(t-10,c-20),x=Math.floor(Math.min($*.6,z*.4))):(c<480?$=Math.min(300,t-10):c<768?$=Math.min(400,t-15):$=Math.min(500,t-20),x=Math.floor($*.7)),a({width:$,height:x})}};s.useEffect(()=>(oe(),window.addEventListener("resize",oe),()=>window.removeEventListener("resize",oe)),[]),s.useEffect(()=>{oe()},[Y]),s.useEffect(()=>{const t=()=>{const c=window.innerHeight<window.innerWidth&&window.innerHeight<=600;ot(c)};return t(),window.addEventListener("resize",t),window.addEventListener("orientationchange",t),()=>{window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)}},[]),s.useEffect(()=>{const t=M.getSocket(),c=M.getUser();if(!c||!r){o("/");return}t.on("player-joined",({players:x})=>{p(x)}),t.on("player-left",({players:x})=>{p(x),x.length===0&&o("/")}),t.on("players-update",({players:x,drawerId:y,round:_,maxRounds:U})=>{p(x),R(y),H(_),U&&Ce(U)}),t.on("game-started",()=>{N(!0)}),t.on("round-start",({isDrawer:x,word:y})=>{w(x),D(x?y:null),q([]),i(!1),S(null)}),t.on("draw-line",x=>{P(y=>[...y,x])}),t.on("guess",({name:x,text:y,correct:_})=>{q(U=>[...U,{name:x,text:y,correct:_}]),_?(S(x),x===M.getUser()?.name&&(i(!0),fe(U=>U+1),Me(U=>({...U,totalCorrectGuesses:U.totalCorrectGuesses+1,longestStreak:Math.max(U.longestStreak,Te+1)})))):x===M.getUser()?.name&&fe(0)}),t.on("clear-canvas",()=>{P([])}),t.on("timer-update",({timeLeft:x})=>{Z(x)}),t.on("round-ended",({reason:x,message:y})=>{x==="timeout"?(de(!0),F(()=>de(!1),4e3)):x==="drawer-left"&&(B(y||"O desenhista saiu da sala. Avançando para próxima ronda..."),T(!0),F(()=>T(!1),4e3))}),t.on("countdown",({value:x,round:y,maxRounds:_})=>{ye(x>0?x:null),Qe(y===_&&x>0&&x<=3)}),t.on("game-ended",({players:x})=>{const y=[...x].sort((Q,ft)=>ft.score-Q.score);xe(y);const _=M.getUser(),U=x.find(Q=>Q.name===_?.name);U&&Me(Q=>({...Q,totalGames:Q.totalGames+1,totalScore:Q.totalScore+U.score,averageScore:(Q.totalScore+U.score)/(Q.totalGames+1),perfectGames:Q.perfectGames+(Te===G?1:0)})),fe(0)}),t.on("game-restarted",()=>{xe(null),de(!1),ye(null),Z(0),S(null),q([]),N(!1)}),t.on("room-deleted",()=>{o("/")}),t.on("room-not-found",()=>{k("Sala não encontrada ou foi excluída"),setTimeout(()=>{o("/")},3e3)}),t.on("hint",({hint:x,type:y})=>{et(_=>[..._,{hint:x,type:y}]),B(x),T(!0),F(()=>T(!1),4e3)}),t.on("word-reveal",({word:x})=>{Re(x),B(`A palavra era: ${x}`),T(!0),F(()=>{T(!1),Re(null)},5e3)}),t.on("chat-message",({name:x,message:y,timestamp:_})=>{tt(U=>[...U,{name:x,message:y,timestamp:_}])}),t.on("connect",()=>{ge("connected"),pe(!1),r&&c&&t.emit("join-room",{userName:c.name,roomCode:r},x=>{x.success||k("Erro ao reconectar à sala")})}),t.on("disconnect",()=>{ge("disconnected"),pe(!0)}),t.on("reconnect",()=>{ge("connected"),pe(!1)}),t.on("player-temporarily-disconnected",({playerId:x,playerName:y})=>{B(`${y} foi temporariamente desconectado`),T(!0),F(()=>T(!1),3e3)}),t.on("player-reconnected",({playerId:x,playerName:y,players:_})=>{p(_),B(`${y} reconectou!`),T(!0),F(()=>T(!1),3e3)});const z=x=>{const{gameState:y}=x.detail;y&&(H(y.round),Ce(y.maxRounds),R(y.currentDrawer),w(y.isDrawer),Z(y.timeLeft),B("Reconectado à sala com sucesso!"),T(!0),F(()=>T(!1),3e3))},$=()=>{k("Falha na conexão. Tentando reconectar..."),F(()=>{re==="disconnected"&&o("/")},1e4)};return window.addEventListener("roomReconnected",z),window.addEventListener("connectionError",$),v(!1),()=>{it(),t.off("player-joined"),t.off("player-left"),t.off("players-update"),t.off("draw-line"),t.off("guess"),t.off("clear-canvas"),t.off("timer-update"),t.off("round-ended"),t.off("countdown"),t.off("game-ended"),t.off("game-restarted"),t.off("room-deleted"),t.off("room-not-found"),t.off("hint"),t.off("word-reveal"),t.off("chat-message"),t.off("connect"),t.off("disconnect"),t.off("reconnect"),t.off("player-temporarily-disconnected"),t.off("player-reconnected"),window.removeEventListener("roomReconnected",z),window.removeEventListener("connectionError",$)}},[r,o,re]);const De=()=>{M.leaveRoom(),M.disconnect(),o("/")},ct=()=>{M.getSocket().emit("start-game",{roomCode:r})},dt=(t,c=500,z=350)=>({x:t.x/c*l.width,y:t.y/z*l.height});s.useEffect(()=>{const t=h.current;if(!t)return;const c=t.getContext("2d");c&&(c.clearRect(0,0,t.width,t.height),c.strokeStyle="#222",c.lineWidth=3,c.lineCap="round",f.forEach(z=>{c.beginPath(),z.points.forEach(($,x)=>{const y=dt($);x===0?c.moveTo(y.x,y.y):c.lineTo(y.x,y.y)}),c.stroke()}))},[f,l]);const mt=t=>{t.preventDefault(),!(!j.trim()||X)&&(M.getSocket().emit("guess",{roomCode:r,text:j}),O(""))},le=()=>{P([]),M.getSocket().emit("clear-canvas",{roomCode:r})},Ie=t=>{if(t.type==="draw"&&t.line&&r){const c=t.line;P(z=>[...z,c]),M.getSocket().emit("draw-line",{roomCode:r,line:c})}else t.type==="clear"&&le()},xt=t=>{B(`🏆 Conquista desbloqueada: ${t.title}!`),T(!0),F(()=>T(!1),4e3)},ut=async()=>{try{const c=`${window.location.origin}/entrar-sala/${r}`,z=`🎨 Venha jogar ArteRápida comigo! 

Clique no link e será automático:
${c}

Ou cole este link no campo "Código da sala" no jogo:
${c}

Sala: ${r}`,$=`whatsapp://send?text=${encodeURIComponent(z)}`,x=window.open($,"_blank");B(x?"Link para WhatsApp aberto!":"Não foi possível abrir o WhatsApp. Verifique se pop-ups estão habilitados."),T(!0),F(()=>T(!1),3e3)}catch{$e()}},ze=()=>{ke(!0)},ht=()=>{ke(!1)},$e=()=>{if(navigator.clipboard)navigator.clipboard.writeText(r||"");else{const t=document.createElement("textarea");t.value=r||"",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}B("Código da sala copiado!"),T(!0),F(()=>T(!1),3e3)},bt=t=>{t.preventDefault(),he.trim()&&(M.getSocket().emit("chat-message",{roomCode:r,message:he}),Ee(""))},pt=()=>{M.getSocket().emit("get-word-history",{roomCode:r},t=>{t.success&&t.history&&(at(t.history),Pe(!0))})},gt=t=>new Date(t).toLocaleTimeString("pt-PT",{hour:"2-digit",minute:"2-digit"});return m?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-900 to-blue-400",children:e.jsx("div",{className:"text-white text-xl",children:"Carregando sala..."})}):b?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-blue-900 to-blue-400",children:[e.jsx("div",{className:"bg-red-500 text-white p-4 rounded-lg mb-4",children:b}),e.jsx("button",{onClick:()=>o("/"),className:"bg-white text-blue-900 px-6 py-2 rounded-lg font-semibold shadow hover:bg-gray-200 transition",children:"Voltar para Home"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 to-blue-400 text-white p-1 sm:p-2 overflow-x-hidden",children:[re!=="connected"&&e.jsx("div",{className:"fixed top-0 left-0 right-0 bg-red-600 text-white text-center py-1 z-50 text-xs",children:re==="reconnecting"?"🔄 Reconectando...":"❌ Sem conexão"}),ne&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-green-600/90 text-white px-3 py-2 rounded-lg shadow-lg z-40 text-xs backdrop-blur-sm border border-green-400/50",children:"📱 Modo Paisagem Ativo"}),Ye&&e.jsx("div",{className:"fixed top-2 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-3 py-1 rounded-lg shadow-lg z-50 text-xs animate-fade-in-out",children:Ze}),st&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-2",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-3 max-w-sm w-full max-h-80 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h3",{className:"text-blue-900 text-base font-bold",children:"💬 Chat"}),e.jsx("button",{onClick:()=>Ae(!1),className:"text-gray-500 hover:text-gray-700 text-lg",children:"✕"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-100 rounded p-2 mb-2 text-xs text-gray-800",children:ae.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Sem mensagens ainda..."}):ae.map((t,c)=>e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"font-semibold text-blue-900",children:t.name}),e.jsx("span",{className:"text-gray-500 text-[10px] ml-1",children:gt(t.timestamp)}),e.jsx("div",{className:"text-gray-800",children:t.message})]},c))}),e.jsxs("form",{onSubmit:bt,className:"flex gap-1",children:[e.jsx("input",{type:"text",value:he,onChange:t=>Ee(t.target.value),placeholder:"Digite sua mensagem...",className:"flex-1 p-2 border rounded text-gray-800 text-xs",autoComplete:"off"}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700 text-xs",children:"➤"})]})]})}),rt&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-2",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-3 max-w-sm w-full max-h-80 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h3",{className:"text-blue-900 text-base font-bold",children:"📚 Histórico"}),e.jsx("button",{onClick:()=>Pe(!1),className:"text-gray-500 hover:text-gray-700 text-lg",children:"✕"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto text-gray-800 text-xs",children:be.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Nenhuma palavra ainda..."}):be.map((t,c)=>e.jsxs("div",{className:"mb-2 p-2 bg-gray-100 rounded",children:[e.jsxs("div",{className:"font-semibold",children:["Ronda ",t.round]}),e.jsx("div",{className:"text-blue-900 font-bold",children:t.word}),e.jsxs("div",{className:"text-gray-600 text-[10px]",children:["Desenhista: ",t.drawer]}),t.guessedBy.length>0&&e.jsxs("div",{className:"text-green-600 text-[10px]",children:["Acertaram: ",t.guessedBy.join(", ")]})]},c))})]})}),Ke&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-2",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-3 max-w-sm w-full relative max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:ht,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-lg",children:"✕"}),e.jsx("h3",{className:"text-blue-900 text-base font-bold mb-2 text-center",children:"🔗 Compartilhar Sala"}),e.jsx("div",{className:"bg-blue-50 p-2 rounded-lg mb-3",children:e.jsxs("p",{className:"text-blue-800 text-xs text-center",children:["💡 ",e.jsx("strong",{children:"Dica:"})," O link direto carrega automaticamente o código da sala!"]})}),e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("p",{className:"text-gray-600 text-xs",children:"Código da sala:"}),e.jsxs("div",{className:"bg-blue-100 text-blue-900 font-mono text-lg font-bold p-2 rounded flex justify-center items-center gap-2 mb-2",children:[r,e.jsx("button",{onClick:$e,className:"text-blue-600 hover:text-blue-800 text-sm",children:"📋"})]}),e.jsxs("div",{className:"flex flex-col space-y-2 mb-3",children:[e.jsx("p",{className:"text-gray-600 text-xs",children:"Link direto:"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",value:`${window.location.origin}/entrar-sala/${r}`,readOnly:!0,className:"bg-gray-100 text-gray-800 p-1 rounded text-xs flex-1"}),e.jsx("button",{onClick:()=>{const t=`${window.location.origin}/entrar-sala/${r}`;if(navigator.clipboard)navigator.clipboard.writeText(t);else{const c=document.createElement("textarea");c.value=t,document.body.appendChild(c),c.select(),document.execCommand("copy"),document.body.removeChild(c)}B("Link copiado!"),T(!0),F(()=>T(!1),3e3)},className:"bg-blue-600 text-white px-2 py-1 rounded text-xs hover:bg-blue-700",children:"📋"})]})]}),e.jsxs("div",{className:"flex justify-center gap-2 mb-3",children:[e.jsx("button",{onClick:ut,className:"bg-green-600 text-white px-3 py-2 rounded font-medium hover:bg-green-700 transition flex items-center justify-center gap-1 text-xs",children:"📱 WhatsApp"}),navigator.share&&e.jsx("button",{onClick:()=>{const t=`${window.location.origin}/entrar-sala/${r}`;navigator.share({title:"ArteRápida - Jogo de Desenho",text:`🎨 Venha jogar ArteRápida comigo! Clique no link ou cole no campo "Código da sala". Sala: ${r}`,url:t}).then(()=>{B("Compartilhado!"),T(!0),F(()=>T(!1),3e3)}).catch(c=>{})},className:"bg-blue-600 text-white px-3 py-2 rounded font-medium hover:bg-blue-700 transition flex items-center justify-center gap-1 text-xs",children:"📤 Mais"})]}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("p",{className:"text-gray-600 text-xs mb-2",children:"📱 QR Code para partilhar:"}),e.jsx("div",{className:"bg-white p-3 rounded-xl shadow-lg inline-block",children:e.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(`${window.location.origin}/entrar-sala/${r}`)}`,alt:"QR Code da sala",className:"w-32 h-32 mx-auto",onError:t=>{t.currentTarget.style.display="none";const c=t.currentTarget.parentElement;c&&(c.innerHTML='<div class="w-32 h-32 bg-gray-100 rounded-lg flex items-center justify-center"><p class="text-gray-500 text-xs text-center">QR indisponível</p></div>')}})}),e.jsx("p",{className:"text-gray-500 text-xs mt-2",children:"🎯 Escaneie para entrar diretamente na sala"})]})]})]})}),e.jsxs("div",{className:`max-w-4xl mx-auto ${ne?"landscape-layout h-screen":""}`,children:[e.jsxs("div",{className:`flex flex-col gap-1 mb-2 ${ne?"landscape-sidebar p-2":""}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-base sm:text-lg font-bold",children:["Sala: ",r]}),e.jsxs("span",{className:"bg-blue-800 text-white px-2 py-1 rounded text-xs font-semibold",children:[n.length," jogador",n.length!==1?"es":""]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap justify-center",children:[e.jsxs("button",{onClick:()=>Ae(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-xl text-sm font-medium transition-all tap-feedback flex items-center gap-2 shadow-lg",children:["💬 Chat",ae.length>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-0.5 font-bold animate-pulse",children:ae.length})]}),e.jsx("button",{onClick:pt,className:"bg-orange-600 hover:bg-orange-700 text-white px-3 py-2 rounded-xl text-sm font-medium transition-all tap-feedback shadow-lg",children:"📚 Histórico"}),e.jsx("button",{onClick:ze,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-xl text-sm font-medium transition-all tap-feedback shadow-lg",children:"🔗 Partilhar"}),ue&&!u&&e.jsx("button",{onClick:ct,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-xl text-sm font-bold transition-all tap-feedback shadow-lg animate-pulse",children:"▶️ INICIAR JOGO"}),e.jsx("button",{onClick:De,className:"bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded-xl text-sm font-medium transition-all tap-feedback flex items-center gap-2 shadow-lg",title:"Sair da sala","aria-label":"Sair da sala",children:"🚪 Sair"})]})]}),e.jsxs("div",{className:`flex flex-col gap-2 ${ne?"landscape-canvas overflow-y-auto":""}`,children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-3 shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h2",{className:"font-bold text-base text-white",children:["👥 Jogadores (",n.length,")"]}),e.jsx("div",{className:"bg-blue-800/50 px-3 py-1 rounded-full",children:e.jsxs("span",{className:"text-yellow-300 font-bold text-sm",children:["Ronda: ",G||0,"/",se||1]})})]}),e.jsx("div",{className:"mobile-players grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:n.map(t=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-xl transition-all ${I===t.id?"bg-gradient-to-r from-yellow-400/20 to-yellow-300/20 border-2 border-yellow-300 shadow-lg":"bg-white/20 hover:bg-white/30"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("span",{className:"truncate text-white font-medium text-sm",children:t.name}),t.isHost&&e.jsx("span",{className:"text-yellow-300 text-base",title:"Host",children:"👑"}),I===t.id&&e.jsx("span",{className:"text-green-300 text-base animate-pulse",title:"Desenhando",children:"✏️"})]}),e.jsx("div",{className:"bg-yellow-300 text-blue-900 px-2 py-1 rounded-lg font-bold text-sm",children:t.score})]},t.id))})]}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-2 text-center",children:u?g?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-center mb-3",children:e.jsx("div",{className:"inline-block bg-gradient-to-r from-green-500 to-green-400 text-white px-4 py-2 rounded-2xl shadow-lg",children:e.jsx("p",{className:"text-lg font-bold",children:"✏️ Você está desenhando!"})})}),e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("p",{className:"text-white text-sm mb-2",children:"Desenhe esta palavra:"}),e.jsx("div",{className:"inline-block bg-yellow-300 text-blue-900 px-6 py-3 rounded-2xl shadow-xl border-2 border-yellow-400",children:e.jsx("span",{className:"font-mono text-2xl font-extrabold tracking-wider",children:A})})]})]}),e.jsx("div",{ref:E,className:`w-full mb-3 ${Y?"flex justify-center":""}`,children:e.jsx(qe,{isDrawer:g,onDraw:Ie,lines:f,onClear:le,className:"border-4 border-yellow-300 bg-white rounded-lg shadow-xl"})}),e.jsxs("div",{className:"flex justify-center gap-3 flex-wrap",children:[e.jsx("button",{onClick:le,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-lg transition-all tap-feedback","aria-label":"Limpar desenho do canvas",children:"🗑️ Apagar Tudo"}),e.jsx("button",{onClick:()=>nt(!Y),className:`px-4 py-2 rounded-xl text-sm font-bold shadow-lg transition-all tap-feedback ${Y?"bg-yellow-300 text-blue-900 hover:bg-yellow-400":"bg-white/20 text-white hover:bg-white/30"}`,title:Y?"Modo Normal":"Modo Horizontal",children:Y?"📱 Normal":"📺 Horizontal"}),Y&&e.jsx("div",{className:"text-sm text-yellow-200 flex items-center px-2 py-1 bg-blue-800/50 rounded-lg",children:"💡 Mais espaço para desenhar!"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"inline-block bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-2xl shadow-lg",children:e.jsx("p",{className:"text-lg font-bold",children:"🔍 Adivinhe o desenho!"})}),I&&e.jsxs("p",{className:"text-blue-200 text-sm mt-2",children:["🎨 ",n.find(t=>t.id===I)?.name," está desenhando"]})]}),e.jsx("div",{ref:E,className:"w-full mb-3",children:e.jsx(qe,{isDrawer:!1,onDraw:Ie,lines:f,onClear:le,className:"border-4 border-yellow-300 bg-white rounded-lg shadow-xl mx-auto"})}),e.jsxs("form",{onSubmit:mt,className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",className:"flex-1 p-3 rounded-xl text-blue-900 text-base font-medium shadow-lg border-2 border-yellow-300 focus:border-yellow-400 focus:outline-none transition-all",placeholder:X?"🎉 Você acertou!":"💭 Digite seu palpite...",value:j,onChange:t=>O(t.target.value),disabled:X,autoComplete:"off",autoCapitalize:"none",autoCorrect:"off",spellCheck:"false",style:{fontSize:"16px"},"aria-label":"Campo para digitar palpite do desenho",role:"textbox"}),e.jsx("button",{type:"submit",className:"bg-yellow-300 hover:bg-yellow-400 text-blue-900 px-4 py-3 rounded-xl font-bold text-base shadow-lg transition-all tap-feedback min-w-[60px]",disabled:X,"aria-label":"Enviar palpite",children:X?"✅":"➤"})]}),e.jsx("div",{className:"max-h-32 overflow-y-auto bg-white/20 backdrop-blur-sm rounded-xl p-3 text-left custom-scroll",role:"log","aria-live":"polite","aria-label":"Lista de palpites dos jogadores",children:W.length===0?e.jsx("div",{className:"text-white/70 text-sm text-center py-2",children:"💬 Nenhum palpite ainda..."}):W.slice(-5).map((t,c)=>e.jsxs("div",{className:`mb-1 p-2 rounded-lg transition-all ${t.correct?"bg-green-500/30 text-green-200 font-bold border border-green-400/50":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsxs("span",{className:"font-semibold text-yellow-300",children:[t.name,":"]}),e.jsx("span",{className:"ml-1 text-sm",children:t.text}),t.correct&&e.jsx("span",{className:"ml-2 text-green-300 font-bold",role:"img","aria-label":"correto",children:"✅ ACERTOU!"})]},c))})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm mb-2",children:"Aguardando início do jogo..."}),e.jsxs("div",{className:"flex justify-center items-center gap-2 text-xs",children:[e.jsxs("span",{children:["Código da sala: ",e.jsx("span",{className:"font-bold text-yellow-300",children:r})]}),e.jsx("button",{onClick:ze,className:"bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700 transition",children:"🔗"})]})]})})]}),u&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-center mb-3",children:e.jsx("div",{className:`inline-block px-6 py-3 rounded-2xl shadow-xl transition-all ${V<=10&&V>0?"bg-red-500 text-white animate-pulse border-2 border-red-300":V<=30?"bg-orange-500 text-white border-2 border-orange-300":"bg-yellow-300 text-blue-900 border-2 border-yellow-400"}`,children:e.jsxs("div",{className:"text-2xl font-extrabold",children:["⏱️ ",V,"s"]})})}),Se.length>0&&e.jsx("div",{className:"bg-gradient-to-r from-blue-800/70 to-purple-800/70 backdrop-blur-sm rounded-xl p-3 mx-auto max-w-md border border-blue-600/50 shadow-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-yellow-200 text-sm font-semibold mb-1",children:"💡 Dica:"}),e.jsx("div",{className:"text-white text-base font-medium",children:Se.slice(-1)[0]?.hint})]})})]}),d&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none p-2 sm:p-4",children:e.jsxs("div",{className:"bg-green-500 text-white text-lg sm:text-xl md:text-4xl font-extrabold px-4 py-3 sm:px-6 sm:py-4 md:px-12 md:py-8 rounded-xl shadow-2xl border-4 border-white animate-pulse text-center",children:[d," acertou a palavra!"]})}),He&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none p-2 sm:p-4",children:e.jsx("div",{className:"bg-red-500 text-white text-lg sm:text-xl md:text-3xl font-extrabold px-4 py-3 sm:px-6 sm:py-4 md:px-10 md:py-6 rounded-xl shadow-2xl border-4 border-white animate-pulse text-center",children:"Tempo esgotado! A ronda terminou."})}),je!==null&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none p-2 sm:p-4",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`order-1 text-4xl sm:text-5xl md:text-7xl font-extrabold px-8 sm:px-12 md:px-16 py-6 sm:py-8 md:py-10 rounded-xl shadow-2xl border-4 border-white mb-2 ${G===se?"bg-gradient-to-r from-pink-500 via-yellow-400 to-red-500 text-white animate-bounce":"bg-blue-800 text-white animate-pulse"}`,children:je}),e.jsxs("div",{className:"order-2 text-base sm:text-xl md:text-2xl font-bold text-yellow-200 mb-2",children:["Ronda: ",G," de ",se]}),Je&&e.jsx("div",{className:"order-3 fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:e.jsxs("div",{className:"relative flex flex-col items-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 rounded-xl animate-pulse"}),e.jsxs("div",{className:"relative z-10 px-4 sm:px-8 md:px-12 py-4 sm:py-6 md:py-8 rounded-xl border-4 sm:border-8 border-pink-400 shadow-2xl bg-gradient-to-r from-yellow-400 via-pink-500 to-red-500 animate-bounce flex flex-col items-center",children:[e.jsxs("span",{className:"text-3xl sm:text-5xl md:text-7xl font-extrabold text-white drop-shadow-lg mb-2 sm:mb-4 flex items-center gap-2 sm:gap-4",children:[e.jsx("span",{role:"img","aria-label":"trophy",children:"🏆"}),"ÚLTIMA RONDA!",e.jsx("span",{role:"img","aria-label":"trophy",children:"🏆"})]}),e.jsx("span",{className:"text-sm sm:text-xl md:text-2xl text-yellow-100 font-bold mt-1 sm:mt-2 text-center",children:"Dê o seu melhor, esta é a última chance!"})]})]})})]})}),me&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/80 p-2",children:e.jsxs("div",{className:"bg-yellow-300 text-blue-900 rounded-xl shadow-2xl p-3 flex flex-col items-center border-4 border-white w-full max-w-sm max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-lg font-extrabold mb-2",children:"🏆 Pódio Final 🏆"}),e.jsx("ol",{className:"text-sm font-bold space-y-1 mb-2",children:me.slice(0,3).map((t,c)=>e.jsxs("li",{className:c===0?"text-lg text-yellow-600":c===1?"text-base text-gray-700":"text-sm text-orange-700",children:[c===0&&"🥇 ",c===1&&"🥈 ",c===2&&"🥉 ",t.name," — ",t.score," pts"]},t.id))}),e.jsx("div",{className:"text-xs mb-2",children:"Parabéns a todos!"}),ue&&e.jsxs("div",{className:"flex flex-col items-center gap-1 mt-2",children:[e.jsx("label",{className:"text-blue-900 font-bold text-sm",children:"Número de rondas:"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"grid grid-cols-5 gap-1",children:[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",className:`p-1 rounded text-xs font-bold transition min-w-6 ${J===t?"bg-yellow-400 text-blue-900 border-2 border-yellow-600":"bg-blue-200 text-blue-900 border-2 border-transparent hover:bg-blue-300"}`,onClick:()=>Ne(t),children:t},t))}),e.jsx("div",{className:"grid grid-cols-5 gap-1 mb-1",children:[6,7,8,9,10].map(t=>e.jsx("button",{type:"button",className:`p-1 rounded text-xs font-bold transition min-w-6 ${J===t?"bg-yellow-400 text-blue-900 border-2 border-yellow-600":"bg-blue-200 text-blue-900 border-2 border-transparent hover:bg-blue-300"}`,onClick:()=>Ne(t),children:t},t))}),e.jsxs("div",{className:"text-xs text-blue-700 text-center",children:[J<=3&&"⚡ Rápida (~3-5 min)",J>=4&&J<=6&&"⏱️ Média (~6-10 min)",J>=7&&J<=10&&"🕐 Longa (~12-15 min)"]})]}),e.jsx("button",{className:"bg-green-600 text-white px-4 py-1 rounded-lg font-bold mt-1 hover:bg-green-700 transition text-sm",onClick:()=>{const t=J&&J>=1&&J<=10?J:3;M.getSocket().emit("restart-game",{roomCode:r,rounds:t}),xe(null)},children:"Nova partida"})]}),!ue&&e.jsx("div",{className:"text-blue-900 font-bold mt-2 text-sm text-center",children:"Aguardando o host iniciar nova partida..."}),e.jsx("button",{className:"bg-red-600 text-white px-4 py-1 rounded-lg font-bold mt-2 hover:bg-red-700 transition text-sm",onClick:De,children:"Sair"})]})}),Le==="stats"&&e.jsx(Gt,{players:n,wordHistory:be,currentRound:G,maxRounds:se,isGameFinished:!!me}),Le==="achievements"&&e.jsx(Ot,{playerStats:lt,onAchievementUnlocked:xt})]})]})}function qt(){return e.jsx(yt,{children:e.jsxs(Nt,{children:[e.jsx(ee,{path:"/",element:e.jsx(Mt,{})}),e.jsx(ee,{path:"/criar-sala",element:e.jsx(zt,{})}),e.jsx(ee,{path:"/entrar-sala",element:e.jsx(We,{})}),e.jsx(ee,{path:"/entrar-sala/:roomCode",element:e.jsx(We,{})}),e.jsx(ee,{path:"/sala/:roomCode",element:e.jsx(Wt,{})})]})})}Pt.createRoot(document.getElementById("root")).render(e.jsx(Ct.StrictMode,{children:e.jsx(qt,{})}));
